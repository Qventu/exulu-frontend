exports.id=1558,exports.ids=[1558],exports.modules={10852:(e,s,t)=>{Promise.resolve().then(t.bind(t,8078))},8078:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var a=t(10326),r=t(90434),i=t(88307),l=t(83855),n=t(33734),o=t(90772),c=t(54432),d=t(39167),m=t(18753),u=t(42270),p=t(17577),x=t(29718),f=t(35047),h=t(65304),j=t(15211),g=t(31048),v=t(87673),N=t(62288),y=t(75290),w=t(34789);function b({open:e,onOpenChange:s,refetchProjects:t}){let[r,i]=(0,p.useState)({name:"",description:"",custom_instructions:""}),[l,n]=(0,p.useState)(!1),{toast:d}=(0,w.pm)(),x=(0,f.useRouter)(),[h]=(0,m.D)(u.kp,{refetchQueries:[{query:u.fM,variables:{page:1,limit:200}}]}),j=async e=>{if(e.preventDefault(),!r.name.trim()){d({title:"Validation Error",description:"Project name is required.",variant:"destructive"});return}n(!0);try{let e=await h({variables:{input:{name:r.name.trim(),description:r.description.trim()||null,custom_instructions:r.custom_instructions.trim()||null,rights_mode:"private"}}});console.log(e);let a=e.data?.projectsCreateOne?.item;a&&(d({title:"Success",description:"Project created successfully!"}),i({name:"",description:"",custom_instructions:""}),s(!1),x.push(`/projects/${a.id}`),t())}catch(e){console.error("Error creating project:",e),d({title:"Error",description:e.message||"Failed to create project. Please try again.",variant:"destructive"})}finally{n(!1)}};return a.jsx(N.Vq,{open:e,onOpenChange:s,children:(0,a.jsxs)(N.cZ,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(N.fK,{children:[a.jsx(N.$N,{children:"Create New Project"}),a.jsx(N.Be,{children:"Create a new project to organize your chat sessions and documents."})]}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"project-name",children:"Project Name *"}),a.jsx(c.I,{id:"project-name",value:r.name,onChange:e=>i({...r,name:e.target.value}),placeholder:"Enter project name",required:!0,disabled:l})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"project-description",children:"Description"}),a.jsx(v.g,{id:"project-description",value:r.description,onChange:e=>i({...r,description:e.target.value}),placeholder:"Describe what this project is about...",rows:3,disabled:l})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(g._,{htmlFor:"custom-instructions",children:"Custom Instructions"}),a.jsx(v.g,{id:"custom-instructions",value:r.custom_instructions,onChange:e=>i({...r,custom_instructions:e.target.value}),placeholder:"Enter custom instructions for chat sessions in this project...",rows:3,disabled:l})]}),(0,a.jsxs)(N.cN,{children:[a.jsx(o.z,{type:"button",variant:"outline",onClick:()=>{i({name:"",description:"",custom_instructions:""}),s(!1)},disabled:l,children:"Cancel"}),a.jsx(o.z,{type:"submit",disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[a.jsx(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Project"})]})]})]})})}function C(){let[e,s]=(0,p.useState)(""),[t,g]=(0,p.useState)(!1),v=(0,f.usePathname)(),{user:N}=(0,p.useContext)(j.S),[y,w]=(0,p.useState)(N),C=(0,d.aM)(u.Ak,{fetchPolicy:"no-cache",nextFetchPolicy:"network-only",variables:{ids:y?.favourite_projects||[]},skip:!y?.favourite_projects?.length}),k=(0,d.aM)(u.fM,{fetchPolicy:"no-cache",nextFetchPolicy:"network-only",variables:{page:1,limit:200,filters:e?[{name:{contains:e}}]:void 0}}),[_]=(0,m.D)(u.d5),P=e=>e.image?a.jsx("img",{src:e.image,alt:`${e.name} thumbnail`,className:"h-4 w-4 rounded-full object-cover"}):a.jsx("div",{className:"h-4 w-4 rounded-full bg-gradient-to-br from-green-500 to-blue-600 flex items-center justify-center text-white text-xs font-medium",children:e.name?.charAt(0).toUpperCase()||"P"}),z=async(e,s)=>{s.preventDefault(),s.stopPropagation();try{let s;let t=y?.favourite_projects||[];s=t.includes(e)?t.filter(s=>s!==e):[...t,e],await _({variables:{id:y?.id,favourite_projects:s}}),w(e=>({...e,favourite_projects:s}))}catch(e){console.error("Error updating favourite projects:",e)}},F=k?.data?.projectsPagination?.items||k?.previousData?.projectsPagination?.items||[],D=C?.data?.projectByIds||C?.previousData?.projectByIds||[];return(0,a.jsxs)("div",{className:"h-full w-[250px] flex-col gap-2 p-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(i.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(c.I,{type:"search",placeholder:"Search projects...",className:"pl-8",value:e,onChange:e=>s(e.target.value)})]}),a.jsx(o.z,{variant:"outline",size:"lg",className:"h-10 w-10 p-0",onClick:()=>{g(!0)},title:"Create new project",children:a.jsx(l.Z,{className:"h-3 w-3"})})]}),a.jsx("div",{className:"flex-1 overflow-auto space-y-1",children:(0,a.jsxs)(a.Fragment,{children:[y?.favourite_projects&&D.length>0&&!e&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground px-2 py-1",children:"Favorites"}),C.loading&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.O,{className:"w-[100%] h-[32px] rounded-lg"}),a.jsx(h.O,{className:"w-[100%] h-[32px] rounded-lg"})]}),!C.loading&&a.jsx(a.Fragment,{children:D.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(r.default,{href:`/projects/${e.id}`,className:"flex-1",children:(0,a.jsxs)(o.z,{variant:v.includes(e.id)?"secondary":"ghost",className:"w-full justify-start gap-2 pr-1",children:[P(e),a.jsx("span",{className:"flex-1 text-left",children:a.jsx(x.L,{text:e.name,length:10})})]})}),a.jsx(o.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 flex-shrink-0",onClick:s=>z(e.id,s),children:a.jsx(n.Z,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"})})]},e.id))})]}),a.jsx("div",{className:"text-xs font-medium text-muted-foreground px-2 py-1 mt-2",children:"All projects:"}),k.loading&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.O,{className:"w-[100%] h-[32px] rounded-lg"}),a.jsx(h.O,{className:"w-[100%] h-[32px] rounded-lg"}),a.jsx(h.O,{className:"w-[100%] h-[32px] rounded-lg"})]}),!k.loading&&F.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(r.default,{href:`/projects/${e.id}`,className:"flex-1",children:(0,a.jsxs)(o.z,{variant:v.includes(e.id)?"secondary":"ghost",className:"w-full justify-start gap-2 pr-1",children:[P(e),a.jsx("span",{className:"flex-1 text-left",children:a.jsx(x.L,{text:e.name,length:14})})]})}),a.jsx(o.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 flex-shrink-0",onClick:s=>z(e.id,s),children:a.jsx(n.Z,{className:`h-3 w-3 ${y?.favourite_projects?.includes(e.id)?"fill-yellow-400 text-yellow-400":""}`})})]},e.id))]})}),a.jsx(b,{open:t,onOpenChange:g,refetchProjects:k.refetch})]})}function k({children:e}){return(0,a.jsxs)("div",{className:"flex h-full",children:[a.jsx("div",{className:"border-r bg-muted/10",children:a.jsx(C,{})}),e]})}},29718:(e,s,t)=>{"use strict";t.d(s,{L:()=>r});var a=t(10326);function r({text:e,length:s}){return e.length>s?(0,a.jsxs)(a.Fragment,{children:[e.slice(0,s),"..."]}):a.jsx(a.Fragment,{children:e})}},62288:(e,s,t)=>{"use strict";t.d(s,{$N:()=>f,Be:()=>h,Vq:()=>o,cN:()=>x,cZ:()=>u,fK:()=>p,hg:()=>c});var a=t(10326),r=t(98986),i=t(94019),l=t(17577),n=t(77863);let o=r.fC,c=r.xz,d=r.h_;r.x8;let m=l.forwardRef(({className:e,...s},t)=>a.jsx(r.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));m.displayName=r.aV.displayName;let u=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(d,{children:[a.jsx(m,{}),(0,a.jsxs)(r.VY,{ref:l,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(i.Z,{className:"size-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));u.displayName=r.VY.displayName;let p=({className:e,...s})=>a.jsx("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});p.displayName="DialogHeader";let x=({className:e,...s})=>a.jsx("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});x.displayName="DialogFooter";let f=l.forwardRef(({className:e,...s},t)=>a.jsx(r.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));f.displayName=r.Dx.displayName;let h=l.forwardRef(({className:e,...s},t)=>a.jsx(r.dk,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));h.displayName=r.dk.displayName},31048:(e,s,t)=>{"use strict";t.d(s,{_:()=>c});var a=t(10326),r=t(34478),i=t(79360),l=t(17577),n=t(77863);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef(({className:e,...s},t)=>a.jsx(r.f,{ref:t,className:(0,n.cn)(o(),e),...s}));c.displayName=r.f.displayName},87673:(e,s,t)=>{"use strict";t.d(s,{g:()=>l});var a=t(10326),r=t(17577),i=t(77863);let l=r.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));l.displayName="Textarea"},33734:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},98637:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/projects/layout.tsx#default`)}};