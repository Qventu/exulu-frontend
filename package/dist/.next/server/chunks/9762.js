exports.id=9762,exports.ids=[9762],exports.modules={11296:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},75983:(e,t,r)=>{"use strict";r.d(t,{TanstackQueryClientProvider:()=>i});var s=r(10326),o=r(22852),a=r(44976);let n=new o.S,i=({children:e})=>s.jsx(a.aH,{client:n,children:e})},30463:(e,t,r)=>{"use strict";r.d(t,{ConfigContextProvider:()=>a,E:()=>o});var s=r(10326);let o=(0,r(17577).createContext)(null);function a({children:e,config:t}){if(console.log("[EXULU] Config: ",t),!t)throw Error("Config not found");return s.jsx(o.Provider,{value:t,children:e})}},15813:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>a});var s=r(10326),o=r(3574);function a({children:e,...t}){return s.jsx(o.f,{...t,defaultTheme:"dark",children:e})}r(17577)},90772:(e,t,r)=>{"use strict";r.d(t,{d:()=>l,z:()=>d});var s=r(10326),o=r(34214),a=r(79360),n=r(17577),i=r(77863);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...n},d)=>{let c=a?o.g7:"button";return s.jsx(c,{className:(0,i.cn)(l({variant:t,size:r,className:e})),ref:d,...n})});d.displayName="Button"},54432:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var s=r(10326),o=r(17577),a=r(77863);let n=o.forwardRef(({className:e,type:t,...r},o)=>s.jsx("input",{type:t,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...r}));n.displayName="Input"},77083:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>h});var s=r(10326),o=r(10321),a=r(79360),n=r(94019),i=r(17577),l=r(77863);let d=o.zt,c=i.forwardRef(({className:e,...t},r)=>s.jsx(o.l_,{ref:r,className:(0,l.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));c.displayName=o.l_.displayName;let u=(0,a.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),p=i.forwardRef(({className:e,variant:t,...r},a)=>s.jsx(o.fC,{ref:a,className:(0,l.cn)(u({variant:t}),e),...r}));p.displayName=o.fC.displayName,i.forwardRef(({className:e,...t},r)=>s.jsx(o.aU,{ref:r,className:(0,l.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=o.aU.displayName;let f=i.forwardRef(({className:e,...t},r)=>s.jsx(o.x8,{ref:r,className:(0,l.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(n.Z,{className:"size-4"})}));f.displayName=o.x8.displayName;let g=i.forwardRef(({className:e,...t},r)=>s.jsx(o.Dx,{ref:r,className:(0,l.cn)("text-sm font-semibold",e),...t}));g.displayName=o.Dx.displayName;let m=i.forwardRef(({className:e,...t},r)=>s.jsx(o.dk,{ref:r,className:(0,l.cn)("text-sm opacity-90",e),...t}));m.displayName=o.dk.displayName;var v=r(34789);function h(){let{toasts:e}=(0,v.pm)();return(0,s.jsxs)(d,{children:[e.map(function({id:e,title:t,description:r,action:o,...a}){return(0,s.jsxs)(p,{...a,children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[t&&s.jsx(g,{children:t}),r&&s.jsx(m,{children:r})]}),o,s.jsx(f,{})]},e)}),s.jsx(c,{})]})}},34789:(e,t,r)=>{"use strict";r.d(t,{Am:()=>u,pm:()=>p});var s=r(17577);let o=0,a=new Map,n=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=i(d,e),l.forEach(e=>{e(d)})}function u({...e}){let t=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,t]=s.useState(d);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},77863:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(41135),o=r(31009);function a(...e){return(0,o.m6)((0,s.W)(e))}},64640:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/query-client.tsx#TanstackQueryClientProvider`)},19579:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{b:()=>w,d:()=>v});var o=r(14029),a=r(53797),n=r(55245),i=r(84770),l=r(1203),d=r(8678),c=r(98691),u=r(35515),p=r(30849),f=r(77234),g=e([d]);d=(g.then?(await g)():g)[0];let m=async e=>{let t=process.env.NEXTAUTH_SECRET,r=await (0,u.nO)({k:t,alg:"HS256",kty:"oct"});return await new p.N(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("365d").sign(r)},v=new d.Pool({host:process.env.POSTGRES_DB_HOST,user:process.env.POSTGRES_DB_USER,port:parseInt(process.env.POSTGRES_DB_PORT||"5432",10),password:process.env.POSTGRES_DB_PASSWORD,database:process.env.POSTGRES_DB_NAME||"exulu",max:20,idleTimeoutMillis:3e4,connectionTimeoutMillis:2e3}),h=[(0,a.Z)({name:"Credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},authorize:async e=>{if(!e?.email||!e?.password)return null;let t=await v.query("SELECT * FROM users WHERE email = $1",[e.email]);if(console.log("[NEXT AUTH] authorize res rows count:",t.rows.length),console.log("[NEXT AUTH] Full user object:",JSON.stringify(t.rows[0],null,2)),!t?.rows?.length)return null;for(let r of t.rows){let t=await c.ZP.compare(e.password,r.password);if(console.log("[NEXT AUTH] isMatch",t),t)return await v.query("UPDATE users SET last_used = $1 WHERE email = $2",[new Date,r.email]),r}}})];process.env.EMAIL_SERVER_HOST&&h.push((0,o.Z)({async sendVerificationRequest({identifier:e,token:t,url:r,provider:{server:s,from:o}}){var a;let{host:i}=new URL(r),l=(0,n.createTransport)(s);await l.sendMail({to:e,from:o,subject:`Sign in to ${i}`,text:(a={token:t,host:i},`
  Sign in to ${a.host}
  
  Sign in code: ${a.token}
  
  Keep in mind that this code will expire after 3 minutes. If you did not request this email you can safely ignore it.
  `),html:function(e){let{token:t,host:r}=e,s=r.replace(/\\./g,"&#8203;."),o={background:"#f9f9f9",text:"#444",mainBackground:"#fff"};return`
<body style="background: ${o.background};">
  <table width="100%" border="0" cellspacing="20" cellpadding="0"
    style="background: ${o.mainBackground}; max-width: 600px; margin: auto; border-radius: 10px;">
    <tr>
      <td align="center"
        style="padding: 10px 0px; font-size: 22px; font-family: Helvetica, Arial, sans-serif; color: ${o.text};">
        Sign in to <strong>${s}</strong>
      </td>
    </tr>
    <tr>
      <td align="center" style="padding: 20px 0;">
        <table border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td align="center"><strong>Sign in code:</strong> ${t}</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td align="center"
        style="padding: 0px 0px 10px 0px; font-size: 16px; line-height: 22px; font-family: Helvetica, Arial, sans-serif; color: ${o.text};">
        Keep in mind that this code will expire after <strong><em>3 minutes</em></strong>. If you did not request this email you can safely ignore it.
      </td>
    </tr>
  </table>
</body>
  `}({token:t,host:i})})},generateVerificationToken:async()=>(0,i.randomInt)(1e5,999999).toString(),maxAge:180,server:{host:process.env.EMAIL_SERVER_HOST,port:parseInt(process.env.EMAIL_SERVER_PORT,10),auth:{user:process.env.EMAIL_SERVER_USER,pass:process.env.EMAIL_SERVER_PASSWORD}},from:process.env.EMAIL_FROM})),process.env.GOOGLE_CLIENT_ID&&process.env.GOOGLE_CLIENT_SECRET&&h.push((0,f.Z)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET,allowDangerousEmailAccountLinking:!0,authorization:{params:{prompt:"consent",access_type:"offline",response_type:"code",scope:"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/directory.readonly https://www.googleapis.com/auth/user.emails.read https://www.googleapis.com/auth/admin.directory.group.readonly https://www.googleapis.com/auth/admin.directory.user.readonly https://www.googleapis.com/auth/userinfo.email openid"}}}));let w=async()=>({pages:{signIn:"/login"},adapter:(0,l.Z)(v),session:{strategy:"jwt"},jwt:{secret:process.env.NEXTAUTH_SECRET},providers:h,callbacks:{async signIn({account:e,profile:t,user:r}){let s=r.email;if(console.log("[EXULU] Sign in callback",e,t,r),e?.provider==="google"&&(s=t?.email),console.log("[EXULU] ALLOWED_EMAIL_DOMAINS",process.env.ALLOWED_EMAIL_DOMAINS),process.env.ALLOWED_EMAIL_DOMAINS){let e=process.env.ALLOWED_EMAIL_DOMAINS.split(",");if(e.push("exulu.com"),e.push("qventu.com"),!e.some(e=>s.endsWith(`@${e}`)))return!1}let o=await v.query("SELECT * FROM users WHERE email = $1",[s]);if(console.log("[EXULU] Sign in callback user query result",o),o.rows.length>0)return await v.query("UPDATE users SET last_used = $1 WHERE email = $2",[new Date,s]),!0;if(!o.rows.length&&e?.provider==="google"){let e=t?.given_name||"";return await v.query('INSERT INTO users ("email", "name", "createdAt", "updatedAt", "emailVerified", "last_used", "type", "super_admin") VALUES ($1, $2, $3, $4, $5, $6, $7, $8)',[s,e,new Date,new Date,new Date,new Date,"user",!1]),!0}return console.log("[NEXT AUTH] res.rows.length",o.rows.length),!!o.rows.length},async jwt({token:e,user:t}){e.uid=e.sub??"nosub";let r=await m({id:t?t.id:e.sub,email:t?t.email:e.email});return e.jwt=r,e},session:async({session:e,token:t})=>(t&&e.user&&(e.user.id=t.id,e.user.jwt=t.jwt,e.user.email=t.email),e)},secret:process.env.NEXTAUTH_SECRET});s()}catch(e){s(e)}})},14796:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var s=r(68570);(0,s.createProxy)(String.raw`/Users/daniel.claessen/Desktop/Projects/exulu/frontend/components/config-context.tsx#ConfigContext`);let o=(0,s.createProxy)(String.raw`/Users/daniel.claessen/Desktop/Projects/exulu/frontend/components/config-context.tsx#ConfigContextProvider`)},10296:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/daniel.claessen/Desktop/Projects/exulu/frontend/components/theme-provider.tsx#ThemeProvider`)},23067:(e,t,r)=>{"use strict";r.d(t,{x:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/daniel.claessen/Desktop/Projects/exulu/frontend/components/ui/toaster.tsx#Toaster`)},53254:(e,t,r)=>{"use strict";r.d(t,{s8:()=>d});var s=r(68666),o=r.n(s),a=r(50100),n=r.n(a),i=r(11344),l=r.n(i);let d=[o().variable,n().variable,l().variable].join(" ")},29375:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{x:()=>i});var o=r(75571),a=r(19579),n=e([a]);a=(n.then?(await n)():n)[0];let i=async()=>{let e=await (0,a.b)(),t=await (0,o.getServerSession)(e);if(!t?.user)return!1;let r=await a.d.query(`
      SELECT 
        users.*,
        json_build_object(
          'id', roles.id,
          'name', roles.name,
          'agents', roles.agents,
          'workflows', roles.workflows,
          'variables', roles.variables,
          'users', roles.users
        ) as role
      FROM users 
      LEFT JOIN roles ON users.role = roles.id 
      WHERE users.email = $1
    `,[t.user.email]),s=r.rows[0];return!!s&&(console.log("[EXULU] Server side auth check",r.rows),console.log("session.user.email",t.user.email),s)};s()}catch(e){s(e)}})},50650:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(55761),o=r(62386);function a(...e){return(0,o.m6)((0,s.W)(e))}},47252:(e,t,r)=>{"use strict";r.d(t,{vc:()=>n});var s=r(26465);let o=async()=>{{let e=process.env.BACKEND;if(!e)throw Error("No backend set.");return{files:e,base:e}}},a=async()=>{let e=await (0,s.getSession)();return e?.user?.jwt},n={backend:async()=>{let e=await o();return fetch(`${e.base}/config`,{method:"GET",headers:{"Content-Type":"application/json"}})},theme:async()=>{try{let e=await a(),t=await o(),r=await fetch(`${t.base}/theme`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});return(await r.json()).theme}catch(e){return console.error("Error fetching theme config:",e),{light:{},dark:{}}}}}},67272:()=>{}};