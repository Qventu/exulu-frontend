(()=>{var e={};e.id=806,e.ids=[806],e.modules={57343:e=>{"use strict";e.exports=require("graphql")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},8678:e=>{"use strict";e.exports=import("pg")},12824:(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{GlobalError:()=>c.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>u,routeModule:()=>j,tree:()=>p}),t(51526),t(98637);var a=t(71197);t(35866);var i=t(23191),l=t(88716),n=t(37922),c=t.n(n),d=t(95231),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);t.d(s,o);var m=e([a]);a=(m.then?(await m)():m)[0];let p=["",{children:["(application)",{children:["projects",{children:["[project]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,51526)),"/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/projects/[project]/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,98637)),"/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/projects/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,71197)),"/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/projects/[project]/page.tsx"],x="/(application)/projects/[project]/page",h={require:t,loadChunk:()=>Promise.resolve()},j=new i.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(application)/projects/[project]/page",pathname:"/projects/[project]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}});r()}catch(e){r(e)}})},11055:(e,s,t)=>{Promise.resolve().then(t.bind(t,32108))},32108:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>H});var r=t(10326),a=t(17577),i=t(35047),l=t(18753),n=t(39167),c=t(88571),d=t(42270),o=t(90772),m=t(54432),p=t(31048),u=t(87673),x=t(33071),h=t(567),j=t(62288),f=t(53313),g=t(60214),v=t(76557);let y=(0,v.Z)("Files",[["path",{d:"M15.5 2H8.6c-.4 0-.8.2-1.1.5-.3.3-.5.7-.5 1.1v12.8c0 .4.2.8.5 1.1.3.3.7.5 1.1.5h9.8c.4 0 .8-.2 1.1-.5.3-.3.5-.7.5-1.1V6.5L15.5 2z",key:"cennsq"}],["path",{d:"M3 7.6v12.8c0 .4.2.8.5 1.1.3.3.7.5 1.1.5h9.8",key:"ms809a"}],["path",{d:"M15 2v5h5",key:"qq6kwv"}]]);var N=t(40617),b=t(58038),w=t(44389),k=t(83855);let C=(0,v.Z)("PackageMinus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);var Z=t(98091),_=t(37202),P=t(88307),S=t(50732),z=t(15286),R=t(65304),q=t(34789),M=t(37859),A=t(43641),E=t(15211),D=t(90434),I=t(68232),B=t(77961),O=t(75909);let $=(0,v.Z)("PlusSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var V=t(2454);let F=({onConfirm:e})=>{let{data:s,loading:t,error:i}=(0,O.t)(),[l,n]=(0,a.useState)(void 0),[c,d]=(0,a.useState)(!1);return(0,r.jsxs)(j.Vq,{open:c,onOpenChange:e=>{d(e),n(void 0)},children:[r.jsx(j.hg,{asChild:!0,children:(0,r.jsxs)(o.z,{className:"w-full",variant:"outline",children:[r.jsx($,{className:"h-4 w-4 mr-2"}),"Select items from knowledge sources to add to the project, or upload files."]})}),(0,r.jsxs)(j.cZ,{className:"sm:max-w-[900px]",children:[(0,r.jsxs)(j.fK,{children:[r.jsx(j.$N,{children:"Item selection"}),r.jsx(j.Be,{children:"Browse through contexts and select items."})]}),!l&&(0,r.jsxs)(V.mY,{className:"rounded-lg border shadow-md md:min-w-[450px]",children:[r.jsx(V.sZ,{placeholder:"Type a command or search..."}),(0,r.jsxs)(V.e8,{children:[r.jsx(V.rb,{children:"No results found."}),r.jsx(V.fu,{heading:"Contexts",children:s?.contexts?.items.map(e=>r.jsx(V.di,{onSelect:()=>{n(e)},children:e.name},e.id))})]})]}),l&&r.jsx(L,{context:l,onConfirm:s=>{console.log("item",s),e([{item:s,context:l}]),d(!1)}})]})]})},L=({context:e,onConfirm:s})=>{let[t,i]=(0,a.useState)(void 0),{loading:l,data:c,refetch:o,previousData:m,error:p}=(0,n.aM)((0,d.P3)(e.id,[]),{fetchPolicy:"no-cache",nextFetchPolicy:"network-only",skip:!e.id,variables:{context:e.id,page:1,limit:10,sort:{field:"updatedAt",direction:"DESC"},filters:{archived:{ne:!0},...t?{name:{contains:`${t}`}}:{}}}});return(0,r.jsxs)(V.mY,{className:"rounded-lg border shadow-md md:min-w-[450px]",children:[r.jsx(V.sZ,{onValueChange:e=>i(e),placeholder:"Type a command or search..."}),r.jsx(V.e8,{children:(0,r.jsxs)(V.fu,{heading:"Items",children:[!m&&l&&r.jsx(V.di,{children:r.jsx(M.g,{})},"loading"),!l&&!c?.[e.id+d.Md]?.items?.length&&r.jsx(V.rb,{children:"No items found."}),(c||m)?.[e.id+d.Md]?.items?.map(e=>r.jsx(V.di,{onSelect:()=>{s(e)},children:e.name},e.id))]})})]})};var T=t(59161);function U({project:e}){let[s,t]=(0,a.useState)(!1),[v,B]=(0,a.useState)(!1),[O,$]=(0,a.useState)(!1),[V,L]=(0,a.useState)(""),[U,G]=(0,a.useState)("overview"),{user:X}=(0,a.useContext)(E.S),H=(0,i.useRouter)(),[W,K]=(0,a.useState)({deleteItems:!1,deleteSessions:!1}),[J,Q]=(0,a.useState)({name:e.name||"",description:e.description||"",custom_instructions:e.custom_instructions||""}),{toast:ee}=(0,q.pm)(),[es,et]=(0,a.useState)({rights_mode:e.rights_mode,users:e.RBAC?.users,roles:e.RBAC?.roles,projects:e.RBAC?.projects}),[er,ea]=(0,a.useState)(e.project_items||[]),[ei,{loading:el}]=(0,l.D)(d.b2),[en]=(0,l.D)(d.Yr),[ec,ed]=(0,a.useState)(!1),{data:eo,loading:em,refetch:ep}=(0,n.aM)(d.GJ,{variables:{page:1,limit:50,filters:[{project:{eq:e.id}}]}}),{data:eu,loading:ex}=(0,n.aM)(d.ym,{variables:{page:1,limit:100,filters:[],sort:{field:"updatedAt",direction:"DESC"}}}),eh=(0,c.x)(),[ej,{loading:ef}]=(0,l.D)(d.fB),[eg,{loading:ev}]=(0,l.D)(d.MU),[ey,{loading:eN}]=(0,l.D)(d.S9),eb=eo?.agent_sessionsPagination?.items||[],ew=eu?.agentsPagination?.items||[],ek=a.useMemo(()=>V?ew.filter(e=>e.name.toLowerCase().includes(V.toLowerCase())):ew,[ew,V]),eC=async()=>{if(!J.name.trim()){ee({title:"Validation Error",description:"Project name is required.",variant:"destructive"});return}try{await ei({variables:{id:e.id,input:{name:J.name.trim(),description:J.description.trim()||null,custom_instructions:J.custom_instructions.trim()||null}}}),ee({title:"Success",description:"Project updated successfully!"}),t(!1)}catch(e){console.error("Error updating project:",e),ee({title:"Error",description:e.message||"Failed to update project. Please try again.",variant:"destructive"})}},eZ=async s=>{try{let t=await ej({variables:{title:`New session with ${s.name}`,agent:s.id,project:e.id,rights_mode:"projects",RBAC:{projects:[{id:e.id,rights:"read"}]}}}),r=t.data?.agent_sessionsCreateOne?.item?.id;r&&(ee({title:"Success",description:"Session created successfully! Sessions started in a project are accessible for viewing by project members."}),$(!1),L(""),H.push(`/chat/${s.id}/${r}`))}catch(e){console.error("Error creating session:",e),ee({title:"Error",description:e.message||"Failed to create session. Please try again.",variant:"destructive"})}},e_=async()=>{try{ed(!0),W.deleteItems&&await Promise.all(er.map(async e=>{let s=e.split("/")[0],t=e.split("/")[1];if(!s||!t)return;let{data:r}=await eh.mutate({mutation:(0,d.mN)(s,"files_default_context"===s?["s3key"]:[]),variables:{id:t}});if(r[`${s}_itemsRemoveOneById`]?.s3key)try{await T.QZ.delete(r[`${s}_itemsRemoveOneById`]?.s3key)}catch(e){console.error("[EXULU] Error deleting file from s3 storage:",e)}})),await Promise.all(eb.map(async e=>{W.deleteSessions?await ey({variables:{id:e.id}}):await eg({variables:{id:e.id,project:null}})})),await en({variables:{id:e.id}}),ee({title:"Success",description:`Project "${e.name}" has been deleted successfully.`}),B(!1),ed(!1),H.push("/projects")}catch(e){ed(!1),console.error("Error deleting project:",e),ee({title:"Error",description:e.message||"Failed to delete project. Please try again.",variant:"destructive"})}};return(0,r.jsxs)("div",{className:"flex-1 p-6 mt-20",children:[r.jsx("div",{className:"max-w-5xl mx-auto space-y-6",children:(0,r.jsxs)("div",{className:"flex gap-6 h-full",children:[(0,r.jsxs)("div",{className:"w-80 space-y-4",children:[r.jsx(x.Zb,{children:r.jsx(x.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.name}),r.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:e.description||"No description provided."})]})})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(o.z,{variant:"overview"===U?"default":"ghost",className:"w-full justify-start",onClick:()=>G("overview"),children:[r.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Project information"]}),(0,r.jsxs)(o.z,{variant:"context"===U?"default":"ghost",className:"w-full justify-start",onClick:()=>G("context"),children:[r.jsx(y,{className:"h-4 w-4 mr-2"}),"Project files"]}),(0,r.jsxs)(o.z,{variant:"sessions"===U?"default":"ghost",className:"w-full justify-start",onClick:()=>G("sessions"),children:[r.jsx(N.Z,{className:"h-4 w-4 mr-2"}),"Project sessions"]}),(0,r.jsxs)(o.z,{variant:"access"===U?"default":"ghost",className:"w-full justify-start",onClick:()=>G("access"),children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Access control"]}),(0,r.jsxs)(o.z,{variant:"settings"===U?"default":"ghost",className:"w-full justify-start",onClick:()=>G("settings"),children:[r.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Project settings"]})]})]}),(0,r.jsxs)("div",{className:"flex-1",children:["overview"===U&&r.jsx("div",{className:"space-y-6",children:(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{children:[r.jsx(x.ll,{children:"Project Information"}),r.jsx(x.SZ,{children:"Basic information about this project"})]}),(0,r.jsxs)(x.aY,{className:"space-y-4",children:[r.jsx("div",{className:"grid gap-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(p._,{htmlFor:"name",children:"Project Name"}),s?r.jsx(m.I,{id:"name",value:J.name,onChange:e=>Q({...J,name:e.target.value})}):r.jsx("p",{className:"text-sm",children:e.name})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(p._,{htmlFor:"description",children:"Description"}),s?r.jsx(u.g,{id:"description",value:J.description,onChange:e=>Q({...J,description:e.target.value}),rows:3}):r.jsx("p",{className:"text-sm",children:e.description||"No description provided"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(p._,{htmlFor:"instructions",children:"Custom Instructions"}),s?r.jsx(u.g,{id:"instructions",value:J.custom_instructions,onChange:e=>Q({...J,custom_instructions:e.target.value}),rows:4,placeholder:"Enter custom instructions for sessions in this project..."}):r.jsx("p",{className:"text-sm",children:e.custom_instructions||"No custom instructions set"})]})]}),r.jsx(x.eW,{children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("div",{className:"flex gap-2",children:s?(0,r.jsxs)(r.Fragment,{children:[r.jsx(o.z,{variant:"outline",onClick:()=>{e&&Q({name:e.name||"",description:e.description||"",custom_instructions:e.custom_instructions||""}),t(!1)},children:"Cancel"}),(0,r.jsxs)(o.z,{onClick:eC,children:[r.jsx("span",{children:"Save changes"}),el&&r.jsx(M.g,{className:"mr-2"})]})]}):(0,r.jsxs)(o.z,{variant:"outline",onClick:()=>t(!0),children:[r.jsx(w.Z,{className:"h-4 w-4 mr-2"}),"Edit"]})})})})]})}),"context"===U&&r.jsx("div",{className:"space-y-6 w-full",children:(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{children:[r.jsx(x.ll,{children:"Project context items"}),r.jsx(x.SZ,{children:"Items that provide context for sessions in this project (max 15 items). Note that different agents may have different file types supported."})]}),r.jsx(x.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(F,{onConfirm:s=>{let t=[...er,...s.map(e=>`${e.context.id}/${e.item.id}`)];console.log("update",t),ea(t),ei({variables:{id:e.id,input:{project_items:t}}})}}),r.jsx("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"space-y-2",children:[er?.length===0&&(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(y,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"No items added to the project context yet."})]}),r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:er?.map(s=>r.jsx(Y,{gid:s,onRemove:s=>{let t=er.filter(e=>e!==s);ea(t),ei({variables:{id:e.id,input:{project_items:t}}})}},s))})]})})]})})]})}),"sessions"===U&&r.jsx("div",{className:"space-y-6",children:(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{children:[r.jsx(x.ll,{children:"Project sessions"}),r.jsx(x.SZ,{children:"Sessions associated with this project"})]}),r.jsx(x.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(o.z,{onClick:()=>{$(!0)},className:"w-full",variant:"outline",children:[r.jsx(k.Z,{className:"h-4 w-4 mr-2"}),"Start new session"]}),r.jsx("div",{className:"space-y-2",children:eb.map(e=>{let s=(0,A.I)(e,X);return(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(N.Z,{className:"h-4 w-4"}),r.jsx("div",{children:r.jsx(D.default,{href:`/chat/${e.agent}/${e.id}`,children:r.jsx("p",{className:"font-medium max-w-[80%] truncate",children:e.title})})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(I.u,{children:[r.jsx(I.aJ,{asChild:!0,children:r.jsx(o.z,{disabled:!s||ev,variant:"ghost",size:"sm",onClick:()=>{ev||(eg({variables:{id:e.id,project:null}}),ep())},children:r.jsx(C,{className:"h-4 w-4"})})}),r.jsx(I._v,{children:r.jsx("p",{children:"Remove session from project."})})]}),(0,r.jsxs)(I.u,{children:[r.jsx(I.aJ,{asChild:!0,children:r.jsx(o.z,{disabled:!s||eN,variant:"ghost",size:"sm",onClick:()=>{eN||(ey({variables:{id:e.id}}),ep())},children:r.jsx(Z.Z,{className:"h-4 w-4"})})}),r.jsx(I._v,{children:r.jsx("p",{children:"Delete session completely."})})]})]})]},e.id)})}),0===eb.length&&!em&&(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(N.Z,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"No sessions found"})]}),em&&(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(N.Z,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Loading sessions..."})]})]})})]})}),"access"===U&&r.jsx("div",{className:"space-y-6",children:(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{children:[r.jsx(x.ll,{children:"Access Control"}),r.jsx(x.SZ,{children:"Control who can access this project"})]}),r.jsx(x.aY,{children:r.jsx(z.P,{allowedModes:["private","users","roles"],initialRightsMode:e.rights_mode||"private",initialUsers:e.RBAC?.users,initialRoles:e.RBAC?.roles,initialProjects:e.RBAC?.projects,onChange:(e,s,t,r)=>{et({rights_mode:e,users:s,roles:t,projects:r})}})}),r.jsx(x.eW,{children:(0,r.jsxs)(o.z,{onClick:()=>{ei({variables:{id:e.id,input:{rights_mode:es.rights_mode,RBAC:{users:es.users,roles:es.roles,projects:es.projects}}}})},children:[r.jsx("span",{children:"Save access rights"}),el&&r.jsx(M.g,{className:"ml-2"})]})})]})}),"settings"===U&&r.jsx("div",{className:"space-y-6",children:(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{children:[r.jsx(x.ll,{children:"Danger Zone"}),r.jsx(x.SZ,{children:"Permanently delete this project and all associated data"})]}),r.jsx(x.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 p-4 border border-destructive/20 rounded-lg bg-destructive/5",children:[r.jsx(_.Z,{className:"h-5 w-5 text-destructive mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-destructive",children:"Delete Project"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This action cannot be undone. This will permanently delete the project and optionally remove all associated context files and sessions."})]})]}),(0,r.jsxs)(j.Vq,{open:v,onOpenChange:B,children:[r.jsx(j.hg,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"destructive",children:[r.jsx(Z.Z,{className:"h-4 w-4 mr-2"}),"Delete Project"]})}),(0,r.jsxs)(j.cZ,{className:"sm:max-w-md",children:[(0,r.jsxs)(j.fK,{children:[r.jsx(j.$N,{children:"Delete Project"}),(0,r.jsxs)(j.Be,{children:['Are you sure you want to delete "',e.name,'"? This action cannot be undone.']})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(f.X,{id:"delete-items",checked:W.deleteItems,onCheckedChange:e=>K(s=>({...s,deleteItems:e}))}),(0,r.jsxs)("label",{htmlFor:"delete-items",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:["Also delete all context items (",er?.length," items)"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(f.X,{id:"delete-sessions",checked:W.deleteSessions,onCheckedChange:e=>K(s=>({...s,deleteSessions:e}))}),(0,r.jsxs)("label",{htmlFor:"delete-sessions",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:["Also delete all sessions (",eb.length," sessions)"]})]}),(W.deleteItems||W.deleteSessions)&&(0,r.jsxs)("div",{className:"flex items-start gap-2 p-3 border border-amber-200 rounded-lg bg-amber-50",children:[r.jsx(_.Z,{className:"h-4 w-4 text-amber-600 mt-0.5"}),r.jsx("p",{className:"text-sm text-amber-800",children:W.deleteItems&&W.deleteSessions?"All context items and sessions will be permanently deleted.":W.deleteItems?"All context items will be permanently deleted.":"All sessions will be permanently deleted."})]})]}),(0,r.jsxs)(j.cN,{className:"sm:justify-start",children:[r.jsx(o.z,{variant:"outline",onClick:()=>B(!1),children:"Cancel"}),(0,r.jsxs)(o.z,{disabled:ec,variant:"destructive",onClick:e_,children:[ec?r.jsx(M.g,{className:"mr-2 w-4 h-4"}):r.jsx(Z.Z,{className:"h-4 w-4 mr-2"}),"Delete Project"]})]})]})]})]})})]})})]})]})}),r.jsx(j.Vq,{open:O,onOpenChange:$,children:(0,r.jsxs)(j.cZ,{className:"sm:max-w-4xl",children:[(0,r.jsxs)(j.fK,{children:[r.jsx(j.$N,{children:"Select an Agent"}),r.jsx(j.Be,{children:"Choose an agent to start a new chat session. Sessions started in a project are accessible for viewing by project members."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(P.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(m.I,{placeholder:"Search agents...",value:V,onChange:e=>L(e.target.value),className:"pl-10"})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:ex?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(6)].map((e,s)=>r.jsx("div",{className:"p-4 border rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(R.O,{className:"h-12 w-12 rounded-full"}),(0,r.jsxs)("div",{className:"space-y-2 flex-1",children:[r.jsx(R.O,{className:"h-4 w-3/4"}),r.jsx(R.O,{className:"h-3 w-1/2"})]})]})},s))}):ek.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ek.map(e=>r.jsx("div",{className:"p-4 border rounded-lg hover:border-primary cursor-pointer transition-colors",onClick:()=>eZ(e),children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.image?r.jsx("img",{src:e.image,alt:e.name,className:"h-12 w-12 rounded-full object-cover"}):r.jsx(S.Z,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium truncate",children:e.name}),r.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.description||`${e.type} agent`}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(h.C,{variant:e.active?"default":"secondary",className:"text-xs",children:e.active?"Active":"Inactive"}),r.jsx(h.C,{variant:"outline",className:"text-xs",children:e.type})]})]})]})},e.id))}):(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(S.Z,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:V?"No agents found matching your search":"No agents available"})]})})]}),r.jsx(j.cN,{children:r.jsx(o.z,{variant:"outline",onClick:()=>$(!1),children:"Cancel"})})]})})]})}function Y({gid:e,onRemove:s}){let t=e.split("/")[0],a=e.split("/")[1];if(!t||!a)return null;let{data:i,loading:l}=(0,n.aM)((0,d.A1)(t,"files_default_context"===t?["s3key"]:[]),{variables:{id:a}});if(console.log("data",i),l)return null;let c=i?.[t+"_itemsById"];if(!c)return null;let o=Object.values(c||{}).filter(e=>"_s3key"===e);return o.length?r.jsx(r.Fragment,{children:o.map(t=>r.jsx(B.jU,{s3Key:t,onRemove:()=>{s(e)},active:!1,disabled:!1}))}):null}var G=t(43273),X=t(76812);function H(){let e=(0,i.useParams)(),s=e?.project,{data:t,loading:a,error:l}=(0,n.aM)(d.jL,{variables:{id:s}});return a?r.jsx("div",{children:r.jsx(R.O,{className:"w-full h-full"})}):l?(0,r.jsxs)(G.bZ,{variant:"destructive",children:[r.jsx(X.LPM,{className:"size-4"}),r.jsx(G.Cd,{children:"Error"}),r.jsx(G.X,{children:"Error loading project."})]}):t?.projectById?r.jsx(U,{project:t.projectById}):(0,r.jsxs)(G.bZ,{variant:"destructive",children:[r.jsx(X.LPM,{className:"size-4"}),r.jsx(G.Cd,{children:"Error"}),r.jsx(G.X,{children:"Project not found."})]})}},567:(e,s,t)=>{"use strict";t.d(s,{C:()=>n});var r=t(10326),a=t(79360);t(17577);var i=t(77863);let l=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...t}){return r.jsx("div",{className:(0,i.cn)(l({variant:s}),e),...t})}},33071:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>n,SZ:()=>d,Zb:()=>l,aY:()=>o,eW:()=>m,ll:()=>c});var r=t(10326),a=t(17577),i=t(77863);let l=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));l.displayName="Card";let n=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let c=a.forwardRef(({className:e,...s},t)=>r.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=a.forwardRef(({className:e,...s},t)=>r.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let m=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},53313:(e,s,t)=>{"use strict";t.d(s,{X:()=>c});var r=t(10326),a=t(13635),i=t(32933),l=t(17577),n=t(77863);let c=l.forwardRef(({className:e,...s},t)=>r.jsx(a.fC,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:r.jsx(a.z$,{className:(0,n.cn)("flex items-center justify-center text-current"),children:r.jsx(i.Z,{className:"size-4"})})}));c.displayName=a.fC.displayName},65685:(e,s,t)=>{"use strict";t.d(s,{B:()=>c,x:()=>n});var r=t(10326),a=t(9261),i=t(17577),l=t(77863);let n=i.forwardRef(({className:e,children:s,...t},i)=>(0,r.jsxs)(a.fC,{ref:i,className:(0,l.cn)("relative overflow-hidden",e),...t,children:[r.jsx(a.l_,{className:"size-full rounded-[inherit]",children:s}),r.jsx(c,{}),r.jsx(a.Ns,{})]}));n.displayName=a.fC.displayName;let c=i.forwardRef(({className:e,orientation:s="vertical",...t},i)=>r.jsx(a.gb,{ref:i,orientation:s,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...t,children:r.jsx(a.q4,{className:"relative flex-1 rounded-full bg-border"})}));c.displayName=a.gb.displayName},34474:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>h,Ph:()=>o,Ql:()=>j,i4:()=>p,ki:()=>m});var r=t(10326),a=t(55423),i=t(941),l=t(96633),n=t(32933),c=t(17577),d=t(77863);let o=a.fC;a.ZA;let m=a.B4,p=c.forwardRef(({className:e,children:s,...t},l)=>(0,r.jsxs)(a.xz,{ref:l,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,r.jsx(a.JO,{asChild:!0,children:r.jsx(i.Z,{className:"size-4 opacity-50"})})]}));p.displayName=a.xz.displayName;let u=c.forwardRef(({className:e,...s},t)=>r.jsx(a.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:r.jsx(l.Z,{className:"size-4"})}));u.displayName=a.u_.displayName;let x=c.forwardRef(({className:e,...s},t)=>r.jsx(a.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:r.jsx(i.Z,{className:"size-4"})}));x.displayName=a.$G.displayName;let h=c.forwardRef(({className:e,children:s,position:t="popper",...i},l)=>r.jsx(a.h_,{children:(0,r.jsxs)(a.VY,{ref:l,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...i,children:[r.jsx(u,{}),r.jsx(a.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),r.jsx(x,{})]})}));h.displayName=a.VY.displayName,c.forwardRef(({className:e,...s},t)=>r.jsx(a.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=a.__.displayName;let j=c.forwardRef(({className:e,children:s,...t},i)=>(0,r.jsxs)(a.ck,{ref:i,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[r.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:r.jsx(a.wU,{children:r.jsx(n.Z,{className:"size-4"})})}),r.jsx(a.eT,{children:s})]}));j.displayName=a.ck.displayName,c.forwardRef(({className:e,...s},t)=>r.jsx(a.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=a.Z0.displayName},75909:(e,s,t)=>{"use strict";t.d(s,{t:()=>i});var r=t(42270),a=t(39167);let i=()=>(0,a.aM)(r.uw,{variables:{limit:20}})},43641:(e,s,t)=>{"use strict";t.d(s,{I:()=>r});let r=(e,s)=>{let t="private"===e.rights_mode,r="public"===e.rights_mode,a="users"===e.rights_mode,i="roles"===e.rights_mode,l=s.super_admin,n=e.created_by===s.id.toString(),c=!1;return t&&n&&(c=!0),r&&(c=!0),a&&(c=e.RBAC?.users?.find(e=>e.id===s.id)?.rights==="write"),i&&(c=e.RBAC?.roles?.find(e=>e.id===s.role?.id)?.rights==="write"),l&&(c=!0),c}},37202:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},47206:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]])},65983:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},54014:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},9015:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},40617:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},44389:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},60214:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]])},58038:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},51526:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/projects/[project]/page.tsx#default`)},13635:(e,s,t)=>{"use strict";t.d(s,{fC:()=>N,z$:()=>w});var r=t(17577),a=t(48051),i=t(93095),l=t(82561),n=t(52067),c=t(53405),d=t(2566),o=t(9815),m=t(45226),p=t(10326),u="Checkbox",[x,h]=(0,i.b)(u),[j,f]=x(u);function g(e){let{__scopeCheckbox:s,checked:t,children:a,defaultChecked:i,disabled:l,form:c,name:d,onCheckedChange:o,required:m,value:x="on",internal_do_not_use_render:h}=e,[f,g]=(0,n.T)({prop:t,defaultProp:i??!1,onChange:o,caller:u}),[v,y]=r.useState(null),[N,b]=r.useState(null),w=r.useRef(!1),k=!v||!!c||!!v.closest("form"),C={checked:f,disabled:l,setChecked:g,control:v,setControl:y,name:d,form:c,value:x,hasConsumerStoppedPropagationRef:w,required:m,defaultChecked:!Z(i)&&i,isFormControl:k,bubbleInput:N,setBubbleInput:b};return(0,p.jsx)(j,{scope:s,...C,children:"function"==typeof h?h(C):a})}var v="CheckboxTrigger",y=r.forwardRef(({__scopeCheckbox:e,onKeyDown:s,onClick:t,...i},n)=>{let{control:c,value:d,disabled:o,checked:u,required:x,setControl:h,setChecked:j,hasConsumerStoppedPropagationRef:g,isFormControl:y,bubbleInput:N}=f(v,e),b=(0,a.e)(n,h),w=r.useRef(u);return r.useEffect(()=>{let e=c?.form;if(e){let s=()=>j(w.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[c,j]),(0,p.jsx)(m.WV.button,{type:"button",role:"checkbox","aria-checked":Z(u)?"mixed":u,"aria-required":x,"data-state":_(u),"data-disabled":o?"":void 0,disabled:o,value:d,...i,ref:b,onKeyDown:(0,l.M)(s,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.M)(t,e=>{j(e=>!!Z(e)||!e),N&&y&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});y.displayName=v;var N=r.forwardRef((e,s)=>{let{__scopeCheckbox:t,name:r,checked:a,defaultChecked:i,required:l,disabled:n,value:c,onCheckedChange:d,form:o,...m}=e;return(0,p.jsx)(g,{__scopeCheckbox:t,checked:a,defaultChecked:i,disabled:n,required:l,onCheckedChange:d,name:r,form:o,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(y,{...m,ref:s,__scopeCheckbox:t}),e&&(0,p.jsx)(C,{__scopeCheckbox:t})]})})});N.displayName=u;var b="CheckboxIndicator",w=r.forwardRef((e,s)=>{let{__scopeCheckbox:t,forceMount:r,...a}=e,i=f(b,t);return(0,p.jsx)(o.z,{present:r||Z(i.checked)||!0===i.checked,children:(0,p.jsx)(m.WV.span,{"data-state":_(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...e.style}})})});w.displayName=b;var k="CheckboxBubbleInput",C=r.forwardRef(({__scopeCheckbox:e,...s},t)=>{let{control:i,hasConsumerStoppedPropagationRef:l,checked:n,defaultChecked:o,required:u,disabled:x,name:h,value:j,form:g,bubbleInput:v,setBubbleInput:y}=f(k,e),N=(0,a.e)(t,y),b=(0,c.D)(n),w=(0,d.t)(i);r.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,s=!l.current;if(b!==n&&e){let t=new Event("click",{bubbles:s});v.indeterminate=Z(n),e.call(v,!Z(n)&&n),v.dispatchEvent(t)}},[v,b,n,l]);let C=r.useRef(!Z(n)&&n);return(0,p.jsx)(m.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??C.current,required:u,disabled:x,name:h,value:j,form:g,...s,tabIndex:-1,ref:N,style:{...s.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function Z(e){return"indeterminate"===e}function _(e){return Z(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=k}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[9276,3543,9049,590,8679,931,6812,1729,7141,2578,108,2721,3217,4470,2270,8050,466,1558],()=>t(12824));module.exports=r})();