(()=>{var e={};e.id=8363,e.ids=[8363],e.modules={57343:e=>{"use strict";e.exports=require("graphql")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},8678:e=>{"use strict";e.exports=import("pg")},48644:e=>{"use strict";e.exports=import("prettier/plugins/babel")},93801:e=>{"use strict";e.exports=import("prettier/plugins/estree")},45747:e=>{"use strict";e.exports=import("prettier/standalone")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},28978:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>p,originalPathname:()=>h,pages:()=>u,routeModule:()=>v,tree:()=>m}),t(71772);var i=t(71197);t(35866);var r=t(23191),l=t(88716),n=t(37922),d=t.n(n),c=t(95231),o={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>c[e]);t.d(s,o);var x=e([i]);i=(x.then?(await x)():x)[0];let m=["",{children:["(application)",{children:["evals",{children:["[id]",{children:["runs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,71772)),"/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/evals/[id]/runs/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,71197)),"/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/evals/[id]/runs/page.tsx"],h="/(application)/evals/[id]/runs/page",p={require:t,loadChunk:()=>Promise.resolve()},v=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(application)/evals/[id]/runs/page",pathname:"/evals/[id]/runs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:m}});a()}catch(e){a(e)}})},19677:(e,s,t)=>{Promise.resolve().then(t.bind(t,65765))},25013:(e,s,t)=>{"use strict";t.d(s,{n:()=>N});var a=t(10326),i=t(17577),r=t(39167),l=t(18753),n=t(75290),d=t(62288),c=t(90772),o=t(31048),x=t(54432),m=t(87673),u=t(34474),h=t(53313),p=t(42270),v=t(34789),g=t(65685),f=t(567),j=t(8281);function N({eval_set_id:e,onCreateSuccess:s,existingRun:t=null,open:N,onOpenChange:b}){let{toast:_}=(0,v.pm)(),y=!!t,[w,k]=(0,i.useState)({id:"",name:"",rights_mode:"private",createdAt:"",updatedAt:"",eval_set_id:e,agent_id:"",eval_functions:[],scoring_method:"average",pass_threshold:70,timeout_in_seconds:300,test_case_ids:[]}),{data:C}=(0,r.aM)(p.ym,{variables:{page:1,limit:100,filters:[]},skip:!e}),{data:Z}=(0,r.aM)(p.Ts,{skip:!e}),{data:P}=(0,r.aM)(p.RV,{variables:{page:1,limit:500,filters:[{eval_set_id:{eq:e}}]},skip:!e}),q=P?.test_casesPagination?.items||[],[S,{loading:E}]=(0,l.D)(p.oo,{onCompleted:()=>{_({title:"Eval run created",description:"The eval run has been created successfully. You can now run it."}),s&&s(),b(!1)},onError:e=>{_({title:"Failed to create eval run",description:e.message,variant:"destructive"})}}),[M,{loading:R}]=(0,l.D)(p.Nu,{onCompleted:()=>{_({title:"Eval run updated",description:"The eval run has been updated successfully."}),s&&s(),b(!1)},onError:e=>{_({title:"Failed to update eval run",description:e.message,variant:"destructive"})}}),A=E||R,T=e=>{k(s=>({...s,test_case_ids:s.test_case_ids.includes(e)?s.test_case_ids.filter(s=>s!==e):[...s.test_case_ids,e]}))},z=()=>{k(e=>({...e,test_case_ids:e.test_case_ids.length===q.length?[]:q.map(e=>e.id)}))},D=e=>{k(s=>({...s,eval_functions:s.eval_functions.some(s=>s.id===e.id)?s.eval_functions.filter(s=>s.id!==e.id):[...s.eval_functions,e]}))};return a.jsx(d.Vq,{open:N,onOpenChange:b,children:(0,a.jsxs)(d.cZ,{className:"max-w-4xl h-[90vh] flex flex-col",children:[(0,a.jsxs)(d.fK,{children:[a.jsx(d.$N,{children:y?"Edit Eval Run":"Create Eval Run"}),a.jsx(d.Be,{children:y?"Update the configuration for this eval run.":"Configure a new evaluation run for this eval set."})]}),(0,a.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),console.log("[EXULU] Eval run",w),!w.name){_({title:"Validation error",description:"Please enter a name for this eval run.",variant:"destructive"});return}if(!w.agent_id){_({title:"Validation error",description:"Please select an agent.",variant:"destructive"});return}if(0===w.test_case_ids.length){_({title:"Validation error",description:"Please select at least one test case.",variant:"destructive"});return}if(0===w.eval_functions.length){_({title:"Validation error",description:"Please select at least one eval function.",variant:"destructive"});return}let t={name:w.name,eval_set_id:e,agent_id:w.agent_id,test_case_ids:w.test_case_ids,eval_functions:w.eval_functions,scoring_method:w.scoring_method.toUpperCase(),pass_threshold:w.pass_threshold,timeout_in_seconds:w.timeout_in_seconds,rights_mode:w.rights_mode,RBAC:w.RBAC};y?M({variables:{id:w.id,data:t}}):S({variables:{data:t}})},className:"flex-1 flex flex-col min-h-0",children:[a.jsx(g.x,{className:"flex-1 -mx-6 px-6",children:(0,a.jsxs)("div",{className:"space-y-6 pb-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Name"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Give this eval run a descriptive name"})]})}),a.jsx(x.I,{type:"text",placeholder:"e.g., GPT-4 baseline evaluation",value:w.name,onChange:e=>k(s=>({...s,name:e.target.value})),className:"h-11"})]}),a.jsx(j.Z,{}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Agent"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose which agent to evaluate"})]})}),(0,a.jsxs)(u.Ph,{value:w.agent_id,onValueChange:e=>k(s=>({...s,agent_id:e})),children:[a.jsx(u.i4,{className:"h-11",children:a.jsx(u.ki,{placeholder:"Select an agent..."})}),a.jsx(u.Bw,{children:C?.agentsPagination?.items?.map(e=>a.jsx(u.Ql,{value:e.id,children:e.name},e.id))})]})]}),a.jsx(j.Z,{}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Eval Functions"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[w.eval_functions.length," of ",Z?.evals?.items?.length||0," selected"]})]})}),a.jsx(c.z,{type:"button",variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),w.eval_functions.length===Z?.evals?.items?.length?k(e=>({...e,eval_functions:[]})):k(e=>({...e,eval_functions:Z?.evals?.items?.map(e=>({id:e.id,config:e.config}))||[]}))},children:w.eval_functions.length===Z?.evals?.items?.length?"Deselect All":"Select All"})]}),a.jsx("div",{className:"border rounded-lg bg-card",children:a.jsx("div",{className:"p-3 space-y-2",children:Z?.evals?.items?.map(e=>a.jsxs("label",{htmlFor:`eval-${e.id}`,className:"flex items-start gap-3 p-3 rounded-md hover:bg-accent transition-colors cursor-pointer border border-transparent hover:border-border",children:[a.jsx(h.X,{id:`eval-${e.id}`,checked:w.eval_functions.some(s=>s.id===e.id),onCheckedChange:()=>D({id:e.id,config:e.config}),className:"mt-0.5"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"font-medium text-sm",children:e.name})}),e.description&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.description}),e.config&&e.config.length>0&&w.eval_functions.some(s=>s.id===e.id)&&a.jsxs("div",{className:"mt-3 space-y-3 pt-3 border-t",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Configuration"}),e.config.map(s=>a.jsxs("div",{className:"space-y-1.5",children:[a.jsx(o._,{htmlFor:`${e.id}-${s.name}`,className:"text-xs font-medium",children:s.name}),a.jsx(m.g,{id:`${e.id}-${s.name}`,placeholder:s.description,value:w.eval_functions.find(s=>s.id===e.id)?.config?.[s.name]||"",onChange:t=>{t.stopPropagation(),k(a=>({...a,eval_functions:a.eval_functions.map(a=>a.id===e.id?{...a,config:{...a.config,[s.name]:t.target.value}}:a)}))},onClick:e=>e.stopPropagation(),className:"min-h-[80px] text-xs resize-none"}),s.description&&a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:s.description})]},s.name))]})]})]},e.id))})})]}),a.jsx(j.Z,{}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Test Cases"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[w.test_case_ids.length," of ",q.length," selected"]})]})}),a.jsx(c.z,{type:"button",variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),z()},children:w.test_case_ids.length===q.length?"Deselect All":"Select All"})]}),a.jsx("div",{className:"border rounded-lg bg-card",children:a.jsx(g.x,{className:"h-[250px]",children:a.jsx("div",{className:"p-3 space-y-2",children:q.map(e=>(0,a.jsxs)("label",{htmlFor:`test-case-${e.id}`,className:"flex items-start gap-3 p-3 rounded-md hover:bg-accent transition-colors cursor-pointer border border-transparent hover:border-border",children:[a.jsx(h.X,{id:`test-case-${e.id}`,checked:w.test_case_ids.includes(e.id),onCheckedChange:()=>T(e.id),className:"mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)(f.C,{variant:"secondary",className:"text-[10px] shrink-0",children:[e.inputs?.length||0," msgs"]})]}),e.description&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.description})]})]},e.id))})})})]}),a.jsx(j.Z,{}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Scoring"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure how scores are calculated"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4 border rounded-lg bg-muted/30",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{htmlFor:"scoringMethod",className:"text-xs font-semibold",children:"Scoring Method"}),(0,a.jsxs)(u.Ph,{value:w.scoring_method,onValueChange:e=>k(s=>({...s,scoring_method:e})),children:[a.jsx(u.i4,{id:"scoringMethod",className:"h-10",children:a.jsx(u.ki,{})}),(0,a.jsxs)(u.Bw,{children:[a.jsx(u.Ql,{value:"median",children:"Median"}),a.jsx(u.Ql,{value:"average",children:"Average"}),a.jsx(u.Ql,{value:"sum",children:"Sum"})]})]}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"How to combine multiple eval function scores"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{htmlFor:"passThreshold",className:"text-xs font-semibold",children:"Pass Threshold"}),a.jsx(x.I,{id:"passThreshold",type:"number",min:"0",max:"100",value:w.pass_threshold,onChange:e=>k(s=>({...s,pass_threshold:Number(e.target.value)})),className:"h-10"}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Minimum score (0-100) to pass"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{htmlFor:"timeoutInSeconds",className:"text-xs font-semibold",children:"Timeout (seconds)"}),a.jsx(x.I,{id:"timeoutInSeconds",type:"number",min:"1",value:w.timeout_in_seconds,onChange:e=>k(s=>({...s,timeout_in_seconds:Number(e.target.value)})),className:"h-10"}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Max time per test case execution"})]})]})]})]})}),a.jsx(j.Z,{className:"my-4"}),a.jsx(d.cN,{className:"shrink-0",children:(0,a.jsxs)(c.z,{type:"submit",disabled:A||!w.name||!w.agent_id||0===w.test_case_ids.length||0===w.eval_functions.length,className:"w-full h-11",children:[A&&a.jsx(n.Z,{className:"mr-2 h-4 w-4 animate-spin"}),y?"Update Eval Run":"Create Eval Run"]})})]})]})})}},66935:(e,s,t)=>{"use strict";t.d(s,{Z:()=>h});var a=t(10326),i=t(39167),r=t(42270),l=t(48998),n=t(75290),d=t(91470),c=t(71059),o=t(37202),x=t(77863);let m={waiting:a.jsx(l.Z,{className:"h-3 w-3"}),active:a.jsx(n.Z,{className:"h-3 w-3 animate-spin"}),completed:null,failed:a.jsx(d.Z,{className:"h-3 w-3"}),delayed:a.jsx(l.Z,{className:"h-3 w-3"}),paused:a.jsx(c.Z,{className:"h-3 w-3"}),stuck:a.jsx(o.Z,{className:"h-3 w-3"})},u={waiting:"text-yellow-600 bg-yellow-50 border-yellow-200",active:"text-blue-600 bg-blue-50 border-blue-200",completed:"",failed:"text-red-600 bg-red-50 border-red-200",delayed:"text-orange-600 bg-orange-50 border-orange-200",paused:"text-gray-600 bg-gray-50 border-gray-200",stuck:"text-red-600 bg-red-50 border-red-200"};function h({evalRun:e,testCases:s,onCellClick:t}){let{data:l,loading:d}=(0,i.aM)(r.JL,{variables:{page:1,limit:500,filters:[{label:{contains:"eval-run-"+e.id}}]},skip:!e.id}),c=l?.job_resultsPagination?.items||[],o=s=>c.find(t=>t.label?.includes(s)&&t.label?.includes(e.id))||null,h=s=>{if(console.log("[EXULU] result",s?.result),!s||"completed"!==s.state||void 0===s.result)return"";let t=s.result,a=e.pass_threshold;return t>=a?"text-green-500":t>=a-20?"text-orange-500":"text-red-500"};return a.jsx("div",{className:"flex-shrink-0 min-w-[100px]",children:s.map(s=>{let i=e.test_case_ids.includes(s.id),r=o(s.id);if(!i)return a.jsx("div",{className:"p-3 text-center border-r bg-muted/20 min-h-[72px] flex items-center justify-center",children:a.jsx("span",{className:"text-xs text-muted-foreground",children:"â€”"})},s.id);let l=h(r),c=r?.state?u[r.state]:"bg-transparent";return a.jsx("div",{className:"p-3 text-center border-r min-h-[72px] flex items-center justify-center",children:a.jsx("div",{onClick:()=>t(r),className:(0,x.cn)("w-full h-full min-h-[48px] rounded transition-colors flex items-center justify-center gap-2",l||c||"border-gray-200 bg-gray-50",r?.state==="completed"&&"cursor-pointer hover:opacity-80",(!r||"completed"!==r.state)&&"cursor-default"),children:d?a.jsx(n.Z,{className:"h-3 w-3 animate-spin"}):r?a.jsx(a.Fragment,{children:"completed"===r.state&&void 0!==r.result?a.jsx("span",{className:"font-semibold text-sm hover:underline",children:r.result.toFixed(1)}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[m[r.state],a.jsx("span",{className:"text-xs capitalize",children:r.state})]})}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[m.waiting,a.jsx("span",{className:"text-xs capitalize",children:"Not started"})]})})},s.id)})})}},70806:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{v:()=>Z});var i=t(10326),r=t(17577),l=t(90772),n=t(65685),d=t(65304),c=t(7890),o=t(60097),x=t(11890),m=t(231),u=t(69508),h=t(94893),p=t(21608),v=t(75290),g=t(98181),f=t(42270),j=t(39167),N=t(18753),b=t(25013),_=t(34789),y=t(66935),w=t(99440),k=t(57004),C=e([k]);function Z({evalRuns:e,evalSet:s,canWrite:t,onRefetch:a}){let{toast:C}=(0,_.pm)(),[Z,P]=(0,r.useState)(5),[q,S]=(0,r.useState)(null),[E,M]=(0,r.useState)(!1),[R,A]=(0,r.useState)(!1),[T,z]=(0,r.useState)(null),[D,$]=(0,r.useState)(!1),[F,O]=(0,r.useState)(null);console.log("[EXULU] Eval set",s);let{data:U,loading:V,refetch:X}=(0,j.aM)(f.RV,{variables:{page:1,limit:500,filters:[{eval_set_id:{eq:s.id}}]},skip:!s.id}),B=U?.test_casesPagination?.items||[],[I,{loading:G}]=(0,N.D)(f.B4,{onCompleted:e=>{C({title:"Eval run started",description:`Scheduled ${e.runEval.count} test cases to run.`}),a()},onError:e=>{C({title:"Failed to start eval run",description:e.message,variant:"destructive"})}}),H=[...e].sort((e,s)=>new Date(e.createdAt).getTime()-new Date(s.createdAt).getTime()),L=H.slice(-Z),J=H.length>Z,Y=e=>{e&&"completed"===e.state&&(S(e),M(!0))},Q=e=>{z(e),A(!0)},W=e=>{O(e),$(!0)},K=e=>{console.log("Stop run:",e)};return V?i.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((e,s)=>i.jsx(d.O,{className:"h-12 w-full"},s))}):0===B.length?i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No test cases in this eval set."}):(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)(n.x,{className:"w-full",children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("div",{className:"sticky left-0 z-10 bg-background flex-shrink-0 min-w-[200px]",children:[i.jsx("div",{className:"p-3 border-b border-r text-left font-medium text-sm",children:"Test Case"}),B.map(e=>i.jsx("div",{className:"p-3 border-b border-r min-h-[72px] flex items-center",children:(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium text-sm",children:e.name}),e.description&&i.jsx("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-1 truncate max-w-[100px]",children:e.id})]})},e.id))]}),J&&(0,i.jsxs)("div",{className:"flex-shrink-0 min-w-[60px]",children:[i.jsx("div",{className:"text-center border-b border-r p-2 min-h-[48px] flex items-center justify-center",children:i.jsx(l.z,{variant:"ghost",size:"sm",onClick:()=>{P(e=>Math.min(e+5,H.length))},className:"h-8 w-8 p-0",children:i.jsx(x.Z,{className:"h-4 w-4"})})}),B.map(e=>i.jsx("div",{className:"p-3 border-b border-r bg-muted/20 min-h-[72px]"},e.id))]}),L.map(e=>(0,i.jsxs)("div",{className:"flex-1 min-w-[100px]",children:[i.jsx("div",{className:"px-2 py-1.5 text-center font-medium text-sm border-b border-r bg-muted/30 min-h-[48px]",children:(0,i.jsxs)("div",{className:"space-y-0.5",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[i.jsx("div",{className:"flex-1 text-xs font-semibold text-foreground truncate",children:e.name}),(0,i.jsxs)(o.h_,{children:[i.jsx(o.$F,{asChild:!0,children:i.jsx(l.z,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 hover:bg-background/80",children:i.jsx(m.Z,{className:"h-3 w-3"})})}),(0,i.jsxs)(o.AW,{align:"end",children:[(0,i.jsxs)(o.Xi,{onClick:()=>Q(e),children:[i.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,i.jsxs)(o.Xi,{onClick:()=>W(e),children:[i.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Start"]}),(0,i.jsxs)(o.Xi,{onClick:()=>K(e),children:[i.jsx(p.Z,{className:"mr-2 h-4 w-4"}),"Stop"]})]})]})]}),i.jsx("div",{className:"text-[10px] text-muted-foreground font-normal leading-tight",children:(0,g.WU)(new Date(e.createdAt),"MMM d, yyyy \xb7 HH:mm")}),i.jsx("div",{className:"text-[10px] text-muted-foreground font-normal leading-tight truncate max-w-[100px] text-center m-auto",children:e.id})]})}),i.jsx(y.Z,{evalRun:e,testCases:B,onCellClick:Y})]},e.id))]}),i.jsx(n.B,{orientation:"horizontal"})]}),i.jsx(c.yo,{open:E,onOpenChange:M,children:(0,i.jsxs)(c.ue,{children:[i.jsx(c.Tu,{children:i.jsx(c.bC,{children:"Test Result Details"})}),i.jsx("div",{className:"mt-4",children:q&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Job ID"}),i.jsx("div",{className:"text-sm",children:q.job_id})]}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Score"}),i.jsx("div",{className:"text-2xl font-bold",children:q.result?.toFixed(1)})]}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Status"}),i.jsx("div",{className:"text-sm capitalize",children:q.state})]}),q.error&&"object"==typeof q.error&&Object.keys(q.error).length>0&&(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Error"}),i.jsx("div",{className:"text-sm text-red-600",children:JSON.stringify(q.error)})]}),q.metadata&&(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Metadata"}),i.jsx(k.G,{code:JSON.stringify(q.metadata,null,2)})]})]})})]})}),i.jsx(b.n,{eval_set_id:s.id,open:R,onOpenChange:e=>{A(e),e||z(null)},existingRun:T,onCreateSuccess:a}),i.jsx(w.aR,{open:D,onOpenChange:$,children:(0,i.jsxs)(w._T,{children:[(0,i.jsxs)(w.fY,{children:[i.jsx(w.f$,{children:"Start Eval Run?"}),(0,i.jsxs)(w.yT,{children:["This will schedule all ",F?.test_case_ids.length||0,' test cases in "',F?.name,'" to be run. The eval run will execute each test case against the configured agent and eval functions.']})]}),(0,i.jsxs)(w.xo,{children:[i.jsx(w.le,{onClick:()=>O(null),children:"Cancel"}),(0,i.jsxs)(w.OL,{onClick:()=>{F&&I({variables:{id:F.id}}),$(!1),O(null)},disabled:G,children:[G&&i.jsx(v.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Start Run"]})]})]})})]})}k=(C.then?(await C)():C)[0],a()}catch(e){a(e)}})},65765:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>k,dynamic:()=>C});var i=t(10326),r=t(17577),l=t(35047),n=t(18753),d=t(39167),c=t(15211),o=t(30463),x=t(98360),m=t(86333),u=t(83855),h=t(37202),p=t(43273),v=t(90772),g=t(33071),f=t(65304),j=t(42270),N=t(25013),b=t(70806),_=t(19753),y=t(34789),w=e([b]);b=(w.then?(await w)():w)[0];let C="force-dynamic";function k(){let e=(0,l.useParams)(),s=(0,l.useRouter)(),{user:t}=(0,r.useContext)(c.S),a=(0,r.useContext)(o.E),w=e.id,[k,C]=(0,r.useState)(!1),{toast:Z}=(0,y.pm)(),P=t.super_admin||t.role?.evals==="read"||t.role?.evals==="write",q=t.super_admin||t.role?.evals==="write",[S,{loading:E}]=(0,n.D)(j.B4,{onCompleted:e=>{Z({title:"Eval run started",description:`Scheduled ${e.runEval.count} test cases to run.`})},onError:e=>{Z({title:"Failed to start eval run",description:e.message,variant:"destructive"})}}),{loading:M,data:R}=(0,d.aM)(j.iA,{variables:{id:w},skip:!w}),{loading:A,data:T,refetch:z}=(0,d.aM)(j.i9,{variables:{page:1,limit:100,filters:[{eval_set_id:{eq:w}}]},skip:!w,pollInterval:1e4});if(!P)return i.jsx("div",{className:"flex h-full flex-1 flex-col space-y-8 p-8",children:(0,i.jsxs)(p.bZ,{variant:"destructive",children:[i.jsx(x.Z,{className:"h-4 w-4"}),i.jsx(p.X,{children:"You don't have permission to access Eval Runs. Contact your administrator to request access."})]})});if(M)return(0,i.jsxs)("div",{className:"flex h-full flex-1 flex-col space-y-8 p-8",children:[i.jsx(f.O,{className:"h-8 w-64"}),i.jsx(f.O,{className:"h-64 w-full"})]});let D=R?.eval_setById,$=T?.eval_runsPagination?.items||[];return(0,i.jsxs)("div",{className:"flex h-full flex-1 flex-col p-6 lg:p-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[i.jsx(v.z,{variant:"ghost",size:"icon",onClick:()=>s.push(`/evals/${w}`),children:i.jsx(m.Z,{className:"h-4 w-4"})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h2",{className:"text-2xl font-bold tracking-tight",children:["Eval Runs for ",D?.name]}),(0,i.jsxs)("p",{className:"text-muted-foreground text-sm mt-1",children:['View and manage evaluation runs for the eval set "',D?.name,'".']})]})]}),q&&a?.workers?.enabled&&a?.workers?.redisHost&&(0,i.jsxs)(v.z,{onClick:()=>C(!0),children:[i.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"New Eval Run"]})]}),(!a?.workers?.enabled||!a?.workers?.redisHost)&&(0,i.jsxs)(p.bZ,{variant:"destructive",className:"mb-6",children:[i.jsx(h.Z,{className:"h-4 w-4"}),i.jsx(p.X,{children:"Workers are not enabled. You can view existing eval runs but cannot create or run new evaluations. Configure Redis to enable running eval runs."})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)(g.Zb,{children:[(0,i.jsxs)(g.Ol,{className:"pb-4",children:[i.jsx(g.ll,{children:"Evaluation Run Results"}),i.jsx(g.SZ,{children:"Matrix view of test case scores across eval runs. Click on a completed cell to view detailed results."})]}),i.jsx(g.aY,{children:A?i.jsx("div",{className:"space-y-2",children:Array.from({length:3}).map((e,s)=>i.jsx(f.O,{className:"h-16 w-full"},s))}):0===$.length?(0,i.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:["No eval runs yet. ",q&&a?.workers?.enabled&&a?.workers?.redisHost&&"Click 'New Eval Run' to create one."]}):i.jsx(b.v,{evalRuns:$,evalSet:D,canWrite:q,onRefetch:z})})]}),a?.workers?.enabled&&a?.workers?.redisHost&&$.length>0&&i.jsx(_.R,{queueName:"eval_runs",nameGenerator:e=>`Eval Run ${e.data?.eval_run_name||e.data?.eval_run_id} - Test Case ${e.data?.test_case_name||e.data?.test_case_id}`,retryJob:e=>{e.data?.test_case_id&&e.data?.eval_run_id&&S({variables:{id:e.data?.eval_run_id,test_case_ids:[e.data?.test_case_id]}})}})]}),i.jsx(N.n,{eval_set_id:w,open:k,onOpenChange:C,onCreateSuccess:()=>{z()}})]})}a()}catch(e){a(e)}})},43273:(e,s,t)=>{"use strict";t.d(s,{Cd:()=>c,X:()=>o,bZ:()=>d});var a=t(10326),i=t(79360),r=t(17577),l=t(77863);let n=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",info:"border-info/50 text-info dark:border-info [&>svg]:text-info"}},defaultVariants:{variant:"default"}}),d=r.forwardRef(({className:e,variant:s,...t},i)=>a.jsx("div",{ref:i,role:"alert",className:(0,l.cn)(n({variant:s}),e),...t}));d.displayName="Alert";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));c.displayName="AlertTitle";let o=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...s}));o.displayName="AlertDescription"},37202:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},11890:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},48998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},18019:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},83855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},21608:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},98091:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},71772:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r,dynamic:()=>i});var a=t(68570);let i=(0,a.createProxy)(String.raw`/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/evals/[id]/runs/page.tsx#dynamic`),r=(0,a.createProxy)(String.raw`/Users/daniel.claessen/Desktop/Projects/exulu/frontend/app/(application)/evals/[id]/runs/page.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[9276,3543,9049,590,8679,931,6812,7344,1729,2578,4552,2194,8181,4739,3217,4470,2270,6282,6623],()=>t(28978));module.exports=a})();