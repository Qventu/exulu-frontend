"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5745],{95745:function(e,t,o){function r(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function n(e){return"object"===r(e)}function i(e,t){return e.length<124?e:t}function a(e){if(!n(e))throw Error(`Message is expected to be an object, but got ${r(e)}`);if(!e.type)throw Error("Message is missing the 'type' property");if("string"!=typeof e.type)throw Error(`Message is expects the 'type' property to be a string, but got ${r(e.type)}`);switch(e.type){case u.ConnectionInit:case u.ConnectionAck:case u.Ping:case u.Pong:if(null!=e.payload&&!n(e.payload))throw Error(`"${e.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${e.payload}"`);break;case u.Subscribe:if("string"!=typeof e.id)throw Error(`"${e.type}" message expects the 'id' property to be a string, but got ${r(e.id)}`);if(!e.id)throw Error(`"${e.type}" message requires a non-empty 'id' property`);if(!n(e.payload))throw Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${r(e.payload)}`);if("string"!=typeof e.payload.query)throw Error(`"${e.type}" message payload expects the 'query' property to be a string, but got ${r(e.payload.query)}`);if(null!=e.payload.variables&&!n(e.payload.variables))throw Error(`"${e.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${r(e.payload.variables)}`);if(null!=e.payload.operationName&&"string"!==r(e.payload.operationName))throw Error(`"${e.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${r(e.payload.operationName)}`);if(null!=e.payload.extensions&&!n(e.payload.extensions))throw Error(`"${e.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${r(e.payload.extensions)}`);break;case u.Next:if("string"!=typeof e.id)throw Error(`"${e.type}" message expects the 'id' property to be a string, but got ${r(e.id)}`);if(!e.id)throw Error(`"${e.type}" message requires a non-empty 'id' property`);if(!n(e.payload))throw Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${r(e.payload)}`);break;case u.Error:var t;if("string"!=typeof e.id)throw Error(`"${e.type}" message expects the 'id' property to be a string, but got ${r(e.id)}`);if(!e.id)throw Error(`"${e.type}" message requires a non-empty 'id' property`);if(!(Array.isArray(t=e.payload)&&t.length>0&&t.every(e=>"message"in e)))throw Error(`"${e.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(e.payload)}`);break;case u.Complete:if("string"!=typeof e.id)throw Error(`"${e.type}" message expects the 'id' property to be a string, but got ${r(e.id)}`);if(!e.id)throw Error(`"${e.type}" message requires a non-empty 'id' property`);break;default:throw Error(`Invalid message 'type' property "${e.type}"`)}return e}function s(e,t){return a(e),JSON.stringify(e,t)}o.d(t,{createClient:function(){return f}}),(l=p||(p={}))[l.InternalServerError=4500]="InternalServerError",l[l.InternalClientError=4005]="InternalClientError",l[l.BadRequest=4400]="BadRequest",l[l.BadResponse=4004]="BadResponse",l[l.Unauthorized=4401]="Unauthorized",l[l.Forbidden=4403]="Forbidden",l[l.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",l[l.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",l[l.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",l[l.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",l[l.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests",(c=u||(u={})).ConnectionInit="connection_init",c.ConnectionAck="connection_ack",c.Ping="ping",c.Pong="pong",c.Subscribe="subscribe",c.Next="next",c.Error="error",c.Complete="complete";var l,c,p,u,d=function(e){return this instanceof d?(this.v=e,this):new d(e)},y=function(e,t,o){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,n=o.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){n[e]&&(r[e]=function(t){return new Promise(function(o,r){i.push([e,t,o,r])>1||s(e,t)})},t&&(r[e]=t(r[e])))}function s(e,t){try{var o;(o=n[e](t)).value instanceof d?Promise.resolve(o.value.v).then(l,c):p(i[0][2],o)}catch(e){p(i[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function p(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}};function f(e){let t;let{url:o,connectionParams:r,lazy:n=!0,onNonLazyError:l=console.error,lazyCloseTimeout:c=0,keepAlive:f=0,disablePong:h,connectionAckWaitTimeout:b=0,retryAttempts:w=5,retryWait:x=async function(e){let t=1e3;for(let o=0;o<e;o++)t*=2;await new Promise(e=>setTimeout(e,t+Math.floor(2700*Math.random()+300)))},shouldRetry:E=g,isFatalConnectionProblem:v,on:S,webSocketImpl:C,generateID:$=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},jsonMessageReplacer:k,jsonMessageReviver:I}=e;if(C){if(!("function"==typeof C&&"constructor"in C&&"CLOSED"in C&&"CLOSING"in C&&"CONNECTING"in C&&"OPEN"in C))throw Error("Invalid WebSocket implementation provided");t=C}else"undefined"!=typeof WebSocket?t=WebSocket:"undefined"!=typeof global?t=global.WebSocket||global.MozWebSocket:"undefined"!=typeof window&&(t=window.WebSocket||window.MozWebSocket);if(!t)throw Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");let N=t,T=(()=>{let e=(()=>{let e={};return{on:(t,o)=>(e[t]=o,()=>{delete e[t]}),emit(t){var o;"id"in t&&(null===(o=e[t.id])||void 0===o||o.call(e,t))}}})(),t={connecting:(null==S?void 0:S.connecting)?[S.connecting]:[],opened:(null==S?void 0:S.opened)?[S.opened]:[],connected:(null==S?void 0:S.connected)?[S.connected]:[],ping:(null==S?void 0:S.ping)?[S.ping]:[],pong:(null==S?void 0:S.pong)?[S.pong]:[],message:(null==S?void 0:S.message)?[e.emit,S.message]:[e.emit],closed:(null==S?void 0:S.closed)?[S.closed]:[],error:(null==S?void 0:S.error)?[S.error]:[]};return{onMessage:e.on,on(e,o){let r=t[e];return r.push(o),()=>{r.splice(r.indexOf(o),1)}},emit(e,...o){for(let r of[...t[e]])r(...o)}}})();function P(e){let t=[T.on("error",o=>{t.forEach(e=>e()),e(o)}),T.on("closed",o=>{t.forEach(e=>e()),e(o)})]}let A,M=0,O,q=!1,R=0,j=!1;async function W(){clearTimeout(O);let[e,t]=await (null!=A?A:A=new Promise((e,t)=>(async()=>{let n,l;if(q){if(await x(R),!M)return A=void 0,t({code:1e3,reason:"All Subscriptions Gone"});R++}T.emit("connecting",q);let c=new N("function"==typeof o?await o():o,"graphql-transport-ws");function d(){isFinite(f)&&f>0&&(clearTimeout(l),l=setTimeout(()=>{c.readyState===N.OPEN&&(c.send(s({type:u.Ping})),T.emit("ping",!1,void 0))},f))}P(e=>{A=void 0,clearTimeout(n),clearTimeout(l),t(e),e instanceof m&&(c.close(4499,"Terminated"),c.onerror=null,c.onclose=null)}),c.onerror=e=>T.emit("error",e),c.onclose=e=>T.emit("closed",e),c.onopen=async()=>{try{T.emit("opened",c);let e="function"==typeof r?await r():r;if(c.readyState!==N.OPEN)return;c.send(s(e?{type:u.ConnectionInit,payload:e}:{type:u.ConnectionInit},k)),isFinite(b)&&b>0&&(n=setTimeout(()=>{c.close(p.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},b)),d()}catch(e){T.emit("error",e),c.close(p.InternalClientError,i(e instanceof Error?e.message:Error(e).message,"Internal client error"))}};let y=!1;c.onmessage=({data:t})=>{try{let o=a("string"==typeof t?JSON.parse(t,I):t);if(T.emit("message",o),"ping"===o.type||"pong"===o.type){T.emit(o.type,!0,o.payload),"pong"===o.type?d():h||(c.send(s(o.payload?{type:u.Pong,payload:o.payload}:{type:u.Pong})),T.emit("pong",!1,o.payload));return}if(y)return;if(o.type!==u.ConnectionAck)throw Error(`First message cannot be of type ${o.type}`);clearTimeout(n),y=!0,T.emit("connected",c,o.payload,q),q=!1,R=0,e([c,new Promise((e,t)=>P(t))])}catch(e){c.onmessage=null,T.emit("error",e),c.close(p.BadResponse,i(e instanceof Error?e.message:Error(e).message,"Bad response"))}}})()));e.readyState===N.CLOSING&&await t;let n=()=>{},l=new Promise(e=>n=e);return[e,n,Promise.race([l.then(()=>{if(!M){let t=()=>e.close(1e3,"Normal Closure");isFinite(c)&&c>0?O=setTimeout(()=>{e.readyState===N.OPEN&&t()},c):t()}}),t])]}function B(e){var t;if(g(e)&&(![1e3,1001,1006,1005,1012,1013,1014].includes(t=e.code)&&t>=1e3&&t<=1999||[p.InternalServerError,p.InternalClientError,p.BadRequest,p.BadResponse,p.Unauthorized,p.SubprotocolNotAcceptable,p.SubscriberAlreadyExists,p.TooManyInitialisationRequests].includes(e.code)))throw e;if(j)return!1;if(g(e)&&1e3===e.code)return M>0;if(!w||R>=w||!E(e)||(null==v?void 0:v(e)))throw e;return q=!0}function z(e,t){let o=$(e),r=!1,n=!1,i=()=>{M--,r=!0};return(async()=>{for(M++;;)try{let[a,l,c]=await W();if(r)return l();let p=T.onMessage(o,e=>{switch(e.type){case u.Next:t.next(e.payload);return;case u.Error:n=!0,r=!0,t.error(e.payload),i();return;case u.Complete:r=!0,i();return}});a.send(s({id:o,type:u.Subscribe,payload:e},k)),i=()=>{r||a.readyState!==N.OPEN||a.send(s({id:o,type:u.Complete},k)),M--,r=!0,l()},await c.finally(p);return}catch(e){if(!B(e))return}})().then(()=>{n||t.complete()}).catch(e=>{t.error(e)}),()=>{r||i()}}return n||(async()=>{for(M++;;)try{let[,,e]=await W();await e}catch(e){try{if(!B(e))return}catch(e){return null==l?void 0:l(e)}}})(),{on:T.on,subscribe:z,iterate(e){let t=[],o={done:!1,error:null,resolve:()=>{}},r=z(e,{next(e){t.push(e),o.resolve()},error(e){o.done=!0,o.error=e,o.resolve()},complete(){o.done=!0,o.resolve()}}),n=function(){return y(this,arguments,function*(){for(;;){for(t.length||(yield d(new Promise(e=>o.resolve=e)));t.length;)yield yield d(t.shift());if(o.error)throw o.error;if(o.done)return yield d(void 0)}})}();return n.throw=async e=>(o.done||(o.done=!0,o.error=e,o.resolve()),{done:!0,value:void 0}),n.return=async()=>(r(),{done:!0,value:void 0}),n},async dispose(){if(j=!0,A){let[e]=await A;e.close(1e3,"Normal Closure")}},terminate(){A&&T.emit("closed",new m)}}}class m extends Error{constructor(){super(...arguments),this.name="TerminatedCloseEvent",this.message="4499: Terminated",this.code=4499,this.reason="Terminated",this.wasClean=!1}}function g(e){return n(e)&&"code"in e&&"reason"in e}}}]);
//# sourceMappingURL=5745.32f200d1c20c6ca4.js.map