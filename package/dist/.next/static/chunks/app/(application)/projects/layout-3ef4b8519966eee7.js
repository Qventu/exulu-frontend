(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1007],{33954:function(e,t,n){Promise.resolve().then(n.bind(n,21654))},21654:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var s=n(57437),r=n(27648),a=n(73247),i=n(99397),o=n(86595),l=n(62869),c=n(95186),d=n(7211),u=n(12199),f=n(27689),m=n(2265),p=n(37091),x=n(99376),h=n(93022),v=n(13832),g=n(26815),j=n(76818),y=n(26110),N=n(15863),b=n(77992);function w(e){let{open:t,onOpenChange:n,refetchProjects:r}=e,[a,i]=(0,m.useState)({name:"",description:"",custom_instructions:""}),[o,d]=(0,m.useState)(!1),{toast:p}=(0,b.pm)(),h=(0,x.useRouter)(),[v]=(0,u.D)(f.kp,{refetchQueries:[{query:f.fM,variables:{page:1,limit:200}}]}),w=async e=>{if(e.preventDefault(),!a.name.trim()){p({title:"Validation Error",description:"Project name is required.",variant:"destructive"});return}d(!0);try{var t,s;let e=await v({variables:{input:{name:a.name.trim(),description:a.description.trim()||null,custom_instructions:a.custom_instructions.trim()||null,rights_mode:"private"}}});console.log(e);let o=null===(s=e.data)||void 0===s?void 0:null===(t=s.projectsCreateOne)||void 0===t?void 0:t.item;o&&(p({title:"Success",description:"Project created successfully!"}),i({name:"",description:"",custom_instructions:""}),n(!1),h.push("/projects/".concat(o.id)),r())}catch(e){console.error("Error creating project:",e),p({title:"Error",description:e.message||"Failed to create project. Please try again.",variant:"destructive"})}finally{d(!1)}};return(0,s.jsx)(y.Vq,{open:t,onOpenChange:n,children:(0,s.jsxs)(y.cZ,{className:"sm:max-w-[500px]",children:[(0,s.jsxs)(y.fK,{children:[(0,s.jsx)(y.$N,{children:"Create New Project"}),(0,s.jsx)(y.Be,{children:"Create a new project to organize your chat sessions and documents."})]}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{htmlFor:"project-name",children:"Project Name *"}),(0,s.jsx)(c.I,{id:"project-name",value:a.name,onChange:e=>i({...a,name:e.target.value}),placeholder:"Enter project name",required:!0,disabled:o})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{htmlFor:"project-description",children:"Description"}),(0,s.jsx)(j.g,{id:"project-description",value:a.description,onChange:e=>i({...a,description:e.target.value}),placeholder:"Describe what this project is about...",rows:3,disabled:o})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{htmlFor:"custom-instructions",children:"Custom Instructions"}),(0,s.jsx)(j.g,{id:"custom-instructions",value:a.custom_instructions,onChange:e=>i({...a,custom_instructions:e.target.value}),placeholder:"Enter custom instructions for chat sessions in this project...",rows:3,disabled:o})]}),(0,s.jsxs)(y.cN,{children:[(0,s.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>{i({name:"",description:"",custom_instructions:""}),n(!1)},disabled:o,children:"Cancel"}),(0,s.jsx)(l.z,{type:"submit",disabled:o,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Project"})]})]})]})})}function _(){var e,t,n,g,j,y,N;let[b,_]=(0,m.useState)(""),[S,k]=(0,m.useState)(!1),E=(0,x.usePathname)(),{user:C}=(0,m.useContext)(v.S),[D,O]=(0,m.useState)(C),M=(0,d.aM)(f.Ak,{fetchPolicy:"no-cache",nextFetchPolicy:"network-only",variables:{ids:(null==D?void 0:D.favourite_projects)||[]},skip:!(null==D?void 0:null===(e=D.favourite_projects)||void 0===e?void 0:e.length)}),T=(0,d.aM)(f.fM,{fetchPolicy:"no-cache",nextFetchPolicy:"network-only",variables:{page:1,limit:200,filters:b?[{name:{contains:b}}]:void 0}});(0,m.useEffect)(()=>{T.refetch()},[E]);let[I]=(0,u.D)(f.d5),P=e=>{var t;return e.image?(0,s.jsx)("img",{src:e.image,alt:"".concat(e.name," thumbnail"),className:"h-4 w-4 rounded-full object-cover"}):(0,s.jsx)("div",{className:"h-4 w-4 rounded-full bg-gradient-to-br from-green-500 to-blue-600 flex items-center justify-center text-white text-xs font-medium",children:(null===(t=e.name)||void 0===t?void 0:t.charAt(0).toUpperCase())||"P"})},A=async(e,t)=>{t.preventDefault(),t.stopPropagation();try{let t;let n=(null==D?void 0:D.favourite_projects)||[];t=n.includes(e)?n.filter(t=>t!==e):[...n,e],await I({variables:{id:null==D?void 0:D.id,favourite_projects:t}}),O(e=>({...e,favourite_projects:t}))}catch(e){console.error("Error updating favourite projects:",e)}},z=(null==T?void 0:null===(n=T.data)||void 0===n?void 0:null===(t=n.projectsPagination)||void 0===t?void 0:t.items)||(null==T?void 0:null===(j=T.previousData)||void 0===j?void 0:null===(g=j.projectsPagination)||void 0===g?void 0:g.items)||[],F=(null==M?void 0:null===(y=M.data)||void 0===y?void 0:y.projectByIds)||(null==M?void 0:null===(N=M.previousData)||void 0===N?void 0:N.projectByIds)||[];return(0,s.jsxs)("div",{className:"h-full w-[250px] flex-col gap-2 p-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(a.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(c.I,{type:"search",placeholder:"Search projects...",className:"pl-8",value:b,onChange:e=>_(e.target.value)})]}),(0,s.jsx)(l.z,{variant:"outline",size:"lg",className:"h-10 w-10 p-0",onClick:()=>{k(!0)},title:"Create new project",children:(0,s.jsx)(i.Z,{className:"h-3 w-3"})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto space-y-1",children:(0,s.jsxs)(s.Fragment,{children:[(null==D?void 0:D.favourite_projects)&&F.length>0&&!b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground px-2 py-1",children:"Favorites"}),M.loading&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.O,{className:"w-[100%] h-[32px] rounded-lg"}),(0,s.jsx)(h.O,{className:"w-[100%] h-[32px] rounded-lg"})]}),!M.loading&&(0,s.jsx)(s.Fragment,{children:F.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(r.default,{href:"/projects/".concat(e.id),className:"flex-1",children:(0,s.jsxs)(l.z,{variant:E.includes(e.id)?"secondary":"ghost",className:"w-full justify-start gap-2 pr-1",children:[P(e),(0,s.jsx)("span",{className:"flex-1 text-left",children:(0,s.jsx)(p.L,{text:e.name,length:10})})]})}),(0,s.jsx)(l.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 flex-shrink-0",onClick:t=>A(e.id,t),children:(0,s.jsx)(o.Z,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"})})]},e.id))})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground px-2 py-1 mt-2",children:"All projects:"}),T.loading&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.O,{className:"w-[100%] h-[32px] rounded-lg"}),(0,s.jsx)(h.O,{className:"w-[100%] h-[32px] rounded-lg"}),(0,s.jsx)(h.O,{className:"w-[100%] h-[32px] rounded-lg"})]}),!T.loading&&z.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(r.default,{href:"/projects/".concat(e.id),className:"flex-1",children:(0,s.jsxs)(l.z,{variant:E.includes(e.id)?"secondary":"ghost",className:"w-full justify-start gap-2 pr-1",children:[P(e),(0,s.jsx)("span",{className:"flex-1 text-left",children:(0,s.jsx)(p.L,{text:e.name,length:14})})]})}),(0,s.jsx)(l.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 flex-shrink-0",onClick:t=>A(e.id,t),children:(0,s.jsx)(o.Z,{className:"h-3 w-3 ".concat((null==D?void 0:null===(t=D.favourite_projects)||void 0===t?void 0:t.includes(e.id))?"fill-yellow-400 text-yellow-400":"")})})]},e.id)})]})}),(0,s.jsx)(w,{open:S,onOpenChange:k,refetchProjects:T.refetch})]})}function S(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"flex h-full",children:[(0,s.jsx)("div",{className:"border-r bg-muted/10",children:(0,s.jsx)(_,{})}),t]})}},37091:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var s=n(57437);function r(e){let{text:t,length:n}=e;return t.length>n?(0,s.jsxs)(s.Fragment,{children:[t.slice(0,n),"..."]}):(0,s.jsx)(s.Fragment,{children:t})}},26110:function(e,t,n){"use strict";n.d(t,{$N:function(){return x},Be:function(){return h},Vq:function(){return l},cN:function(){return p},cZ:function(){return f},fK:function(){return m},hg:function(){return c}});var s=n(57437),r=n(34567),a=n(32489),i=n(2265),o=n(94508);let l=r.fC,c=r.xz,d=r.h_;r.x8;let u=i.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...a})});u.displayName=r.aV.displayName;let f=i.forwardRef((e,t)=>{let{className:n,children:i,...l}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(r.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...l,children:[i,(0,s.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(a.Z,{className:"size-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=r.VY.displayName;let m=e=>{let{className:t,...n}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};m.displayName="DialogHeader";let p=e=>{let{className:t,...n}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};p.displayName="DialogFooter";let x=i.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",n),...a})});x.displayName=r.Dx.displayName;let h=i.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",n),...a})});h.displayName=r.dk.displayName},26815:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var s=n(57437),r=n(6394),a=n(90535),i=n(2265),o=n(94508);let l=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.f,{ref:t,className:(0,o.cn)(l(),n),...a})});c.displayName=r.f.displayName},76818:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var s=n(57437),r=n(2265),a=n(94508);let i=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...r})});i.displayName="Textarea"},77992:function(e,t,n){"use strict";n.d(t,{Am:function(){return u},pm:function(){return f}});var s=n(2265);let r=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?i(n):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,n=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:n});return d({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||s()}}}),{id:n,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function f(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},15863:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},99397:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},73247:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},86595:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},12199:function(e,t,n){"use strict";n.d(t,{D:function(){return u}});var s=n(5853),r=n(79285),a=n(49466),i=n(36628),o=n(59058),l=n(77828),c=n(63251),d=n(59394).Nq?r.useLayoutEffect:r.useEffect;function u(e,t){var n=(0,c.x)(null==t?void 0:t.client);(0,o.Vp)(e,o.n_.Mutation);var u=r.useState({called:!1,loading:!1,client:n}),f=u[0],m=u[1],p=r.useRef({result:f,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});d(function(){Object.assign(p.current,{client:n,options:t,mutation:e})});var x=r.useCallback(function(e){void 0===e&&(e={});var t=p.current,n=t.options,r=t.mutation,o=(0,s.pi)((0,s.pi)({},n),{mutation:r}),c=e.client||p.current.client;p.current.result.loading||o.ignoreResults||!p.current.isMounted||m(p.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:c});var d=++p.current.mutationId,u=(0,a.J)(o,e);return c.mutate(u).then(function(t){var n,s,r=t.data,a=t.errors,o=a&&a.length>0?new l.cA({graphQLErrors:a}):void 0,f=e.onError||(null===(n=p.current.options)||void 0===n?void 0:n.onError);if(o&&f&&f(o,u),d===p.current.mutationId&&!u.ignoreResults){var x={called:!0,loading:!1,data:r,error:o,client:c};p.current.isMounted&&!(0,i.D)(p.current.result,x)&&m(p.current.result=x)}var h=e.onCompleted||(null===(s=p.current.options)||void 0===s?void 0:s.onCompleted);return o||null==h||h(t.data,u),t},function(t){if(d===p.current.mutationId&&p.current.isMounted){var n,s={loading:!1,error:t,data:void 0,called:!0,client:c};(0,i.D)(p.current.result,s)||m(p.current.result=s)}var r=e.onError||(null===(n=p.current.options)||void 0===n?void 0:n.onError);if(r)return r(t,u),{data:void 0,errors:t};throw t})},[]),h=r.useCallback(function(){if(p.current.isMounted){var e={called:!1,loading:!1,client:p.current.client};Object.assign(p.current,{mutationId:0,result:e}),m(e)}},[]);return r.useEffect(function(){var e=p.current;return e.isMounted=!0,function(){e.isMounted=!1}},[]),[x,(0,s.pi)({reset:h},f)]}},6394:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var s=n(2265),r=n(66840),a=n(57437),i=s.forwardRef((e,t)=>(0,a.jsx)(r.WV.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i}},function(e){e.O(0,[9851,7629,7093,6148,847,1942,7648,7823,8068,5799,4567,605,85,4957,7398,6373,3832,2971,2117,1744],function(){return e(e.s=33954)}),_N_E=e.O()}]);
//# sourceMappingURL=layout-3ef4b8519966eee7.js.map