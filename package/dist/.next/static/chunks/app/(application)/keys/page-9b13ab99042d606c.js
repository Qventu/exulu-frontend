(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[546],{70468:function(){},5295:function(e,r,t){Promise.resolve().then(t.bind(t,63950))},63950:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return w}});var s=t(57437),n=t(2265),a=t(15863),l=t(99397),i=t(54001),o=t(78867),d=t(18930),c=t(62869),u=t(95186),x=t(27107),f=t(66070),m=t(73578),h=t(26110),v=t(65613),g=t(35974),p=t(77992),j=t(84426),y=t(7211),b=t(12199),N=t(27689),k=t(27426);function w(){var e,r,t,w;let[P,A]=(0,n.useState)(""),[C,I]=(0,n.useState)(""),[Z,D]=(0,n.useState)(!1),[S,K]=(0,n.useState)(null),[R,_]=(0,n.useState)(null),{loading:z,error:G,data:M,refetch:O,previousData:U}=(0,y.aM)(N.fo,{fetchPolicy:"cache-first",nextFetchPolicy:"network-only",variables:{page:1,limit:10,filters:[{type:{eq:"api"}}]},pollInterval:3e4});console.log("data",M);let E=async()=>{var e,r,t;if(!P.trim()){(0,p.Am)({title:"Error",description:"Please enter a name for your API key",variant:"destructive"});return}D(!0);let s="sk_".concat(Math.random().toString(36).substring(2,15),"_").concat(Math.random().toString(36).substring(2,15)),n="/".concat(P.toLowerCase().trim().replaceAll(" ","_")),a=await k.ZP.hash(s,12),l=await Y({variables:{firstname:"".concat(P),type:"api",apikey:"".concat(a).concat(n),email:"".concat(a,"@exulu-api-user.com"),role:C||void 0}});console.log("response",l),K({id:"".concat(null===(t=l.data)||void 0===t?void 0:null===(r=t.usersCreateOne)||void 0===r?void 0:null===(e=r.item)||void 0===e?void 0:e.id),name:P,key:"".concat(s).concat(n),createdAt:new Date}),A(""),I(""),D(!1)},[F,T]=(0,b.D)(N.eY,{refetchQueries:[N.fo,"GetUsers"]}),[Y,W]=(0,b.D)(N.ve,{refetchQueries:[N.fo,"GetUsers"]}),[Q,V]=(0,b.D)(N.Pe,{refetchQueries:[N.fo,"GetUsers"]}),q=e=>{navigator.clipboard.writeText(e),(0,p.Am)({title:"Copied!",description:"API key copied to clipboard"})},L=async e=>{await F({variables:{id:e}}),_(null),(0,p.Am)({title:"Deleted",description:"API key has been deleted"})},X=async(e,r)=>{try{await Q({variables:{id:e,role:r||null}}),(0,p.Am)({title:"Updated",description:"API key role has been updated"})}catch(e){(0,p.Am)({title:"Error",description:"Failed to update API key role",variant:"destructive"})}};return(0,s.jsxs)("div",{className:"container mx-auto py-6 space-y-8 max-w-5xl",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"API Keys"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage your API keys for accessing the Exulu IMP API. Keep your keys secure - they have full access to your account."})]}),(0,s.jsxs)(f.Zb,{children:[(0,s.jsxs)(f.Ol,{children:[(0,s.jsx)(f.ll,{children:"Create API Key"}),(0,s.jsx)(f.SZ,{children:"Generate a new API key for your applications. API keys provide full access to your account."})]}),(0,s.jsx)(f.aY,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,s.jsx)(u.I,{placeholder:"API Key Name (e.g. Production, Development)",value:P,onChange:e=>A(e.target.value),className:"flex-1"}),(0,s.jsx)("div",{className:"sm:w-64",children:(0,s.jsx)(j.u,{value:C,onChange:I,placeholder:"Select role"})})]}),(0,s.jsx)(c.z,{onClick:E,disabled:Z||!P.trim(),className:"whitespace-nowrap self-start",children:Z?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Generate API Key"]})})]})})]}),S&&(0,s.jsxs)(v.bZ,{className:"border-green-500 bg-green-50 dark:bg-green-950 dark:border-green-900",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),(0,s.jsx)(v.Cd,{className:"text-green-600 dark:text-green-400",children:"New API Key Generated"}),(0,s.jsxs)(v.X,{className:"mt-4",children:[(0,s.jsxs)("div",{className:"mb-2 text-sm text-muted-foreground",children:[(0,s.jsx)("strong",{children:"Important:"})," This key will only be displayed once. Please copy it now and store it securely."]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)("code",{className:"relative rounded bg-muted px-[0.5rem] py-[0.3rem] font-mono text-sm font-semibold overflow-x-auto max-w-[calc(100%-40px)]",children:S.key}),(0,s.jsx)(c.z,{variant:"outline",size:"icon",onClick:()=>q(S.key),className:"h-8 w-8 flex-shrink-0",children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})]}),(0,s.jsx)(c.z,{variant:"link",className:"mt-2 h-auto p-0 text-green-600 dark:text-green-400",onClick:()=>K(null),children:"Dismiss"})]})]}),(0,s.jsxs)(f.Zb,{children:[(0,s.jsxs)(f.Ol,{children:[(0,s.jsx)(f.ll,{children:"Your API Keys"}),(0,s.jsx)(f.SZ,{children:"Manage your existing API keys. For security, API keys are never displayed in full after creation."})]}),(0,s.jsx)(f.aY,{children:(null==M?void 0:null===(r=M.usersPagination)||void 0===r?void 0:null===(e=r.items)||void 0===e?void 0:e.length)===0?(0,s.jsx)("div",{className:"text-center py-6 text-muted-foreground",children:"No API keys found. Generate your first key above."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(m.iA,{children:[(0,s.jsx)(m.xD,{children:(0,s.jsxs)(m.SC,{children:[(0,s.jsx)(m.ss,{children:"Name"}),(0,s.jsx)(m.ss,{children:"Key"}),(0,s.jsx)(m.ss,{children:"Role"}),(0,s.jsx)(m.ss,{children:"Created"}),(0,s.jsx)(m.ss,{children:"Last Used"}),(0,s.jsx)(m.ss,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(m.RM,{children:null==M?void 0:null===(w=M.usersPagination)||void 0===w?void 0:null===(t=w.items)||void 0===t?void 0:t.map(e=>(0,s.jsxs)(m.SC,{children:[(0,s.jsx)(m.pj,{className:"font-medium",children:e.name||e.firstname}),(0,s.jsx)(m.pj,{children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("code",{className:"bg-muted px-1 py-0.5 rounded text-xs",children:"****************"})})}),(0,s.jsx)(m.pj,{children:(0,s.jsx)("div",{className:"w-48",children:(0,s.jsx)(j.u,{value:e.role,onChange:r=>X(e.id,r),placeholder:"No role assigned"})})}),(0,s.jsx)(m.pj,{children:(0,x.WU)(new Date(e.createdAt),"PP hh:mm")}),(0,s.jsx)(m.pj,{children:e.last_used?(0,x.WU)(new Date(e.last_used),"PP hh:mm"):(0,s.jsx)(g.C,{variant:"outline",className:"text-xs",children:"Never"})}),(0,s.jsx)(m.pj,{className:"text-right",children:(0,s.jsxs)(h.Vq,{open:R===e.id,onOpenChange:r=>{r||_(null),r&&_(e.id)},children:[(0,s.jsx)(h.hg,{asChild:!0,children:(0,s.jsx)(c.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-950",children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(h.cZ,{children:[(0,s.jsxs)(h.fK,{children:[(0,s.jsx)(h.$N,{children:"Delete API Key"}),(0,s.jsxs)(h.Be,{children:['Are you sure you want to delete the API key "',e.name||e.firstname,'"? This action cannot be undone.']})]}),(0,s.jsxs)(h.cN,{children:[(0,s.jsx)(c.z,{variant:"outline",onClick:()=>_(null),children:"Cancel"}),(0,s.jsx)(c.z,{variant:"destructive",onClick:()=>L(e.id),children:"Delete API Key"})]})]})]})})]},e.id))})]})})}),(0,s.jsx)(f.eW,{className:"text-xs text-muted-foreground border-t pt-4",children:"API keys grant full access to your account. Keep them secure and rotate them regularly."})]})]})}},65613:function(e,r,t){"use strict";t.d(r,{Cd:function(){return d},X:function(){return c},bZ:function(){return o}});var s=t(57437),n=t(90535),a=t(2265),l=t(94508);let i=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",info:"border-info/50 text-info dark:border-info [&>svg]:text-info"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,r)=>{let{className:t,variant:n,...a}=e;return(0,s.jsx)("div",{ref:r,role:"alert",className:(0,l.cn)(i({variant:n}),t),...a})});o.displayName="Alert";let d=a.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("h5",{ref:r,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",t),...n})});d.displayName="AlertTitle";let c=a.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",t),...n})});c.displayName="AlertDescription"},35974:function(e,r,t){"use strict";t.d(r,{C:function(){return i}});var s=t(57437),n=t(90535);t(2265);var a=t(94508);let l=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:r,variant:t,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(l({variant:t}),r),...n})}},66070:function(e,r,t){"use strict";t.d(r,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var s=t(57437),n=t(2265),a=t(94508);let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});l.displayName="Card";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...n})});c.displayName="CardContent";let u=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...n})});u.displayName="CardFooter"},95186:function(e,r,t){"use strict";t.d(r,{I:function(){return l}});var s=t(57437),n=t(2265),a=t(94508);let l=n.forwardRef((e,r)=>{let{className:t,type:n,...l}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...l})});l.displayName="Input"}},function(e){e.O(0,[9851,7629,7093,6148,847,1942,7823,5799,4567,3825,3702,7107,6399,6373,4386,2971,2117,1744],function(){return e(e.s=5295)}),_N_E=e.O()}]);
//# sourceMappingURL=page-9b13ab99042d606c.js.map