(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3778],{64806:function(e,t,n){Promise.resolve().then(n.bind(n,77569))},77569:function(e,t,n){"use strict";n.d(t,{default:function(){return v}});var r=n(57437),a=n(78006),o=n(98244),i=n(2265);n(43254),n(5788);var s=n(11713),c=n(6374),l=n(93022),u=n(65613),d=n(20653),f=n(44045);function v(){let e=i.useContext(f.E),{data:t,isLoading:n,error:v}=(0,s.a)({queryKey:["user"],queryFn:()=>(0,c.LP)()});if(n)return(0,r.jsx)(l.O,{className:"h-10 w-20"});if(v)return(0,r.jsxs)(u.bZ,{variant:"destructive",children:[(0,r.jsx)(d.LPM,{className:"size-4"}),(0,r.jsx)(u.Cd,{children:"Error"}),(0,r.jsx)(u.X,{children:v.message})]});console.log("token",t);let h=(0,a.createGraphiQLFetcher)({url:"".concat(null==e?void 0:e.backend,"/graphql"),headers:{Authorization:"Bearer ".concat(t)}});return(0,r.jsx)(o.yB,{fetcher:h})}},44045:function(e,t,n){"use strict";n.d(t,{ConfigContextProvider:function(){return o},E:function(){return a}});var r=n(57437);let a=(0,n(2265).createContext)(null);function o(e){let{children:t,config:n}=e;if(console.log("[EXULU] Config: ",n),!n)throw Error("Config not found");return(0,r.jsx)(a.Provider,{value:n,children:t})}},65613:function(e,t,n){"use strict";n.d(t,{Cd:function(){return l},X:function(){return u},bZ:function(){return c}});var r=n(57437),a=n(90535),o=n(2265),i=n(94508);let s=(0,a.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",info:"border-info/50 text-info dark:border-info [&>svg]:text-info"}},defaultVariants:{variant:"default"}}),c=o.forwardRef((e,t)=>{let{className:n,variant:a,...o}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(s({variant:a}),n),...o})});c.displayName="Alert";let l=o.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",n),...a})});l.displayName="AlertTitle";let u=o.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",n),...a})});u.displayName="AlertDescription"},93022:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var r=n(57437),a=n(94508);function o(e){let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...n})}},94508:function(e,t,n){"use strict";n.d(t,{cn:function(){return o}});var r=n(61994),a=n(53335);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}},6374:function(e,t,n){"use strict";n.d(t,{DQ:function(){return i},LP:function(){return o},QZ:function(){return s}});var r=n(80605);let a=async()=>{let e=await fetch("/api/config").then(e=>e.json());if(!e.backend)throw Error("No backend set.");return{files:e.backend,base:e.backend}},o=async()=>{var e;let t=await (0,r.getSession)();return null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.jwt},i={image:{generate:async e=>{let t=await a(),n="".concat(t.base,"/generate/agent/image"),r=await o();if(!r)throw Error("No valid session token available.");return fetch(n,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}})}}},s={object:async e=>{let t=await a(),n="".concat(t.files,"/s3/object"),r=await o();return(await fetch(n,{method:"POST",body:JSON.stringify({key:e}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}})).json()},list:async e=>{let{search:t,continuationToken:n}=e,r=await a(),i="".concat(r.files,"/s3/list"),s=await o();if(!s)throw Error("No valid session token available.");return t&&(i+="?search=".concat(t)),n&&(i+="?continuationToken=".concat(n)),(await fetch(i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}})).json()},download:async e=>{let t=await a(),n="".concat(t.files,"/s3/download?key=").concat(e),r=await o();if(!r)throw Error("No valid session token available.");return fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}})},delete:async e=>{let t=await a(),n="".concat(t.files,"/s3/delete?key=").concat(e),r=await o();if(!r)throw Error("No valid session token available.");return fetch(n,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}})}}},5788:function(){}},function(e){e.O(0,[4142,1972,8310,5829,9851,7629,7093,7823,8068,5799,4567,605,85,4957,1713,8807,2971,2117,1744],function(){return e(e.s=64806)}),_N_E=e.O()}]);
//# sourceMappingURL=page-d1580ece2ff5ba64.js.map