(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6208,7598],{16677:function(e,t,s){Promise.resolve().then(s.bind(s,52489))},52489:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Q},dynamic:function(){return H}});var l=s(57437),n=s(2265),a=s(20653),r=s(94508),i=s(62869),c=s(84190);function o(e){let{column:t,title:s,className:n}=e;return t.getCanSort()?(0,l.jsx)("div",{className:(0,r.cn)("flex items-center space-x-2",n),children:(0,l.jsxs)(c.h_,{children:[(0,l.jsx)(c.$F,{asChild:!0,children:(0,l.jsxs)(i.z,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[(0,l.jsx)("span",{children:s}),"desc"===t.getIsSorted()?(0,l.jsx)(a.veu,{className:"ml-2 h-4 w-4"}):"asc"===t.getIsSorted()?(0,l.jsx)(a.Hf3,{className:"ml-2 h-4 w-4"}):(0,l.jsx)(a.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,l.jsxs)(c.AW,{align:"start",children:[(0,l.jsxs)(c.Xi,{onClick:()=>t.toggleSorting(!1),children:[(0,l.jsx)(a.Hf3,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),(0,l.jsxs)(c.Xi,{onClick:()=>t.toggleSorting(!0),children:[(0,l.jsx)(a.veu,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),(0,l.jsx)(c.VD,{}),(0,l.jsxs)(c.Xi,{onClick:()=>t.toggleVisibility(!1),children:[(0,l.jsx)(a.L52,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})}):(0,l.jsx)("div",{className:(0,r.cn)(n),children:s})}var d=s(12199),u=s(45675),x=s(18930),m=s(27689),h=s(77992),f=s(37099);function g(e){var t;let{row:s,user:r,edit:o}=e,{toast:g}=(0,h.pm)(),[j,p]=(0,n.useState)(!1),v=s.original,N=r.super_admin||(null===(t=r.role)||void 0===t?void 0:t.evals)==="write",[w,{loading:C}]=(0,d.D)(m.lW,{onCompleted:()=>{g({title:"Test case deleted",description:"The test case has been successfully deleted."}),p(!1),window.location.reload()},onError:e=>{g({title:"Failed to delete test case",description:e.message,variant:"destructive"})}});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c.h_,{children:[(0,l.jsx)(c.$F,{asChild:!0,children:(0,l.jsxs)(i.z,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)(a.nWS,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,l.jsxs)(c.AW,{align:"end",className:"w-[160px]",children:[(0,l.jsxs)(c.Xi,{onClick:e=>{e.stopPropagation(),o()},children:[(0,l.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Edit"]}),N&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.VD,{}),(0,l.jsxs)(c.Xi,{onClick:e=>{e.stopPropagation(),p(!0)},className:"text-destructive",children:[(0,l.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),(0,l.jsx)(f.aR,{open:j,onOpenChange:p,children:(0,l.jsxs)(f._T,{onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)(f.fY,{children:[(0,l.jsx)(f.f$,{children:"Are you sure?"}),(0,l.jsxs)(f.yT,{children:['This will permanently delete the test case "',v.name,'". This action cannot be undone.']})]}),(0,l.jsxs)(f.xo,{children:[(0,l.jsx)(f.le,{children:"Cancel"}),(0,l.jsx)(f.OL,{onClick:e=>{e.stopPropagation(),w({variables:{id:v.id}})},disabled:C,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:C?"Deleting...":"Delete"})]})]})})]})}var j=s(35974),p=s(7598);let v=(e,t)=>[{accessorKey:"name",header:e=>{let{column:t}=e;return(0,l.jsx)(o,{column:t,title:"Name"})},cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"flex space-x-2",children:(0,l.jsx)("span",{className:"max-w-[400px] truncate font-medium",children:t.getValue("name")})})}},{accessorKey:"description",header:e=>{let{column:t}=e;return(0,l.jsx)(o,{column:t,title:"Description"})},cell:e=>{let{row:t}=e,s=t.getValue("description");return(0,l.jsx)("div",{className:"flex space-x-2",children:(0,l.jsx)("span",{className:"max-w-[300px] truncate text-muted-foreground",children:s||"—"})})}},{accessorKey:"inputs",header:e=>{let{column:t}=e;return(0,l.jsx)(o,{column:t,title:"Messages"})},cell:e=>{let{row:t}=e,s=t.getValue("inputs");return(0,l.jsxs)(j.C,{variant:"secondary",children:[(null==s?void 0:s.length)||0," messages"]})}},{accessorKey:"expected_tools",header:e=>{let{column:t}=e;return(0,l.jsx)(o,{column:t,title:"Expected Tools"})},cell:e=>{let{row:t}=e,s=t.getValue("expected_tools");return s&&0!==s.length?(0,l.jsxs)(j.C,{variant:"outline",children:[s.length," tools"]}):(0,l.jsx)("span",{className:"text-muted-foreground",children:"—"})}},{accessorKey:"expected_knowledge_sources",header:e=>{let{column:t}=e;return(0,l.jsx)(o,{column:t,title:"Expected Contexts"})},cell:e=>{let{row:t}=e,s=t.getValue("expected_knowledge_sources");return s&&0!==s.length?(0,l.jsxs)(j.C,{variant:"outline",children:[s.length," contexts"]}):(0,l.jsx)("span",{className:"text-muted-foreground",children:"—"})}},{accessorKey:"expected_agent_tools",header:e=>{let{column:t}=e;return(0,l.jsx)(o,{column:t,title:"Expected Agents"})},cell:e=>{let{row:t}=e,s=t.getValue("expected_agent_tools");return s&&0!==s.length?(0,l.jsxs)(j.C,{variant:"outline",children:[s.length," agents"]}):(0,l.jsx)("span",{className:"text-muted-foreground",children:"—"})}},{accessorKey:"updatedAt",header:e=>{let{column:t}=e;return(0,l.jsx)(o,{column:t,title:"Updated"})},cell:e=>{let{row:t}=e,s=t.getValue("updatedAt");return(0,l.jsx)("div",{className:"flex w-[100px] items-center",children:(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,p.Q)(new Date(s),{addSuffix:!0})})})}},{id:"actions",cell:s=>{let{row:n}=s;return(0,l.jsx)(g,{row:n,user:e,edit:()=>{t(n.original)}})}}];var N=s(7211),w=s(71594),C=s(24525),b=s(99397);function y(e){let{table:t}=e;return(0,l.jsxs)(c.h_,{children:[(0,l.jsx)(c.$F,{asChild:!0,children:(0,l.jsxs)(i.z,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[(0,l.jsx)(a.hsZ,{className:"mr-2 h-4 w-4"}),"View"]})}),(0,l.jsxs)(c.AW,{align:"end",className:"w-[150px]",children:[(0,l.jsx)(c.Ju,{children:"Toggle columns"}),(0,l.jsx)(c.VD,{}),t.getAllColumns().filter(e=>void 0!==e.accessorFn&&e.getCanHide()).map(e=>(0,l.jsx)(c.bO,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:t=>e.toggleVisibility(!!t),children:(0,l.jsx)("span",{className:"w-[200px] truncate",children:e.id})},e.id))]})]})}var D=s(95186),k=s(93022),M=s(73578),S=s(82534);function T(e){var t,s,r,c,o,u;let{columns:x,testCase:f}=e,{toast:g}=(0,h.pm)(),[j,p]=n.useState({}),[v,T]=n.useState({}),[_,F]=n.useState([]),[R,V]=(0,n.useState)([]),[P,H]=(0,n.useState)(1),[Q,X]=n.useState([]),[z,A]=(0,n.useState)(!1),[E,Z]=(0,n.useState)(f||null);n.useEffect(()=>{f?(Z(f),A(!0)):(A(!1),Z(null))},[f]);let{loading:Y,error:I,data:O,refetch:G}=(0,N.aM)(m.RV,{fetchPolicy:"no-cache",nextFetchPolicy:"network-only",variables:{page:P,limit:10,filters:R},pollInterval:3e4}),[K]=(0,d.D)(m.lW,{onCompleted:()=>{g({title:"Test case deleted",description:"The test case has been successfully deleted."}),G()},onError:e=>{g({title:"Failed to delete test case",description:e.message,variant:"destructive"})}}),W=null==O?void 0:null===(t=O.test_casesPagination)||void 0===t?void 0:t.pageInfo,L=(null==O?void 0:null===(s=O.test_casesPagination)||void 0===s?void 0:s.items)||[],$=(0,w.b7)({data:L,columns:x,state:{sorting:Q,columnVisibility:v,rowSelection:j,columnFilters:_},enableRowSelection:!0,onRowSelectionChange:p,onSortingChange:X,onColumnFiltersChange:F,onColumnVisibilityChange:T,getCoreRowModel:(0,C.sC)(),getFilteredRowModel:(0,C.vL)(),getPaginationRowModel:(0,C.G_)(),getSortedRowModel:(0,C.tj)(),getFacetedRowModel:(0,C.o6)(),getFacetedUniqueValues:(0,C.JG)()});n.useEffect(()=>{var e;let t=null===(e=$.getColumn("name"))||void 0===e?void 0:e.getFilterValue();t?V([{name:{contains:t}}]):V([])},[null===(r=$.getColumn("name"))||void 0===r?void 0:r.getFilterValue()]);let q=e=>{e?(Z(e),A(!0)):(A(!1),Z(null))},J=()=>{A(!1),Z(null)};return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"flex flex-1 items-center space-x-2",children:(0,l.jsx)(D.I,{placeholder:"Filter by name...",value:null!==(u=null===(c=$.getColumn("name"))||void 0===c?void 0:c.getFilterValue())&&void 0!==u?u:"",onChange:e=>{var t;return null===(t=$.getColumn("name"))||void 0===t?void 0:t.setFilterValue(e.target.value)},className:"h-8 w-[150px] lg:w-[250px]"})}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(y,{table:$}),(0,l.jsxs)(i.z,{variant:"default",size:"sm",className:"ml-auto h-8",onClick:()=>A(!0),children:[(0,l.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"New Test Case"]})]})]}),(0,l.jsx)("div",{className:"rounded-md border",children:(0,l.jsxs)(M.iA,{children:[(0,l.jsx)(M.xD,{children:$.getHeaderGroups().map(e=>(0,l.jsx)(M.SC,{children:e.headers.map(e=>(0,l.jsx)(M.ss,{children:e.isPlaceholder?null:(0,w.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,l.jsx)(M.RM,{children:Y?Array.from({length:5}).map((e,t)=>(0,l.jsx)(M.SC,{children:x.map((e,t)=>(0,l.jsx)(M.pj,{children:(0,l.jsx)(k.O,{className:"h-6 w-full"})},t))},t)):(null===(o=$.getRowModel().rows)||void 0===o?void 0:o.length)?$.getRowModel().rows.map(e=>(0,l.jsx)(M.SC,{"data-state":e.getIsSelected()&&"selected",className:"cursor-pointer",onClick:()=>{q(e.original)},children:e.getVisibleCells().map(e=>(0,l.jsx)(M.pj,{children:(0,w.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(M.SC,{children:(0,l.jsx)(M.pj,{colSpan:x.length,className:"h-24 text-center",children:"No test cases found."})})})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,l.jsx)("div",{className:"flex-1 text-sm text-muted-foreground",children:W&&(0,l.jsxs)(l.Fragment,{children:["Page ",W.currentPage," of ",W.pageCount," (",W.itemCount," total)"]})}),(0,l.jsx)("div",{className:"flex items-center space-x-6 lg:space-x-8",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)(i.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>H(1),disabled:!(null==W?void 0:W.hasPreviousPage),children:[(0,l.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,l.jsx)(a.kRt,{className:"h-4 w-4"})]}),(0,l.jsxs)(i.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>H(P-1),disabled:!(null==W?void 0:W.hasPreviousPage),children:[(0,l.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,l.jsx)(a.wyc,{className:"h-4 w-4"})]}),(0,l.jsxs)(i.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>H(P+1),disabled:!(null==W?void 0:W.hasNextPage),children:[(0,l.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,l.jsx)(a.XCv,{className:"h-4 w-4"})]}),(0,l.jsxs)(i.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>H((null==W?void 0:W.pageCount)||1),disabled:!(null==W?void 0:W.hasNextPage),children:[(0,l.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,l.jsx)(a.yr4,{className:"h-4 w-4"})]})]})})]}),(0,l.jsx)(S.F,{open:z,onClose:J,onSuccess:()=>{G(),J()},testCase:E})]})}var _=s(13832),F=s(64972),R=s(32660),V=s(65613),P=s(99376);let H="force-dynamic";function Q(){var e,t;let{user:s}=(0,n.useContext)(_.S),[a,r]=(0,n.useState)(null),c=v(s,e=>{r(e)}),o=(0,P.useRouter)();return s.super_admin||(null===(e=s.role)||void 0===e?void 0:e.evals)==="read"||(null===(t=s.role)||void 0===t?void 0:t.evals)==="write"?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"hidden h-full flex-1 flex-col space-y-8 p-8 md:flex",children:[(0,l.jsx)("div",{className:"flex items-center justify-between space-y-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>o.push("/evals"),children:(0,l.jsx)(R.Z,{className:"h-4 w-4"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Test Cases"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Create and manage test cases for evaluating agent performance."})]})]})}),(0,l.jsx)(T,{columns:c,testCase:a||void 0})]})}):(0,l.jsx)("div",{className:"flex h-full flex-1 flex-col space-y-8 p-8",children:(0,l.jsxs)(V.bZ,{variant:"destructive",children:[(0,l.jsx)(F.Z,{className:"h-4 w-4"}),(0,l.jsx)(V.X,{children:"You don't have permission to access Test Cases. Contact your administrator to request access."})]})})}},73578:function(e,t,s){"use strict";s.d(t,{RM:function(){return c},Rn:function(){return x},SC:function(){return o},iA:function(){return r},pj:function(){return u},ss:function(){return d},xD:function(){return i}});var l=s(57437),n=s(2265),a=s(94508);let r=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",s),...n})})});r.displayName="Table";let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",s),...n})});i.displayName="TableHeader";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",s),...n})});c.displayName="TableBody",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...n})}).displayName="TableFooter";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...n})});o.displayName="TableRow";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&:has([role=checkbox])]:w-[40px]",s),...n})});d.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0 [&:has([role=checkbox])]:w-[40px]",s),...n})});u.displayName="TableCell";let x=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",s),...n})});x.displayName="TableCaption"},45675:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(39763).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(39763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},81363:function(e,t,s){"use strict";s.d(t,{T:function(){return n}});var l=s(99649);function n(e,t){let s=(0,l.Q)(e),n=(0,l.Q)(t);return 12*(s.getFullYear()-n.getFullYear())+(s.getMonth()-n.getMonth())}},27742:function(e,t,s){"use strict";s.d(t,{V:function(){return n}});var l=s(99649);function n(e){let t=(0,l.Q)(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}},7598:function(e,t,s){"use strict";s.d(t,{Q:function(){return x}});var l=s(63497),n=s(99649);function a(e,t){let s=(0,n.Q)(e),l=(0,n.Q)(t),a=s.getTime()-l.getTime();return a<0?-1:a>0?1:a}var r=s(78198),i=s(81363),c=s(27742),o=s(5654),d=s(55528),u=s(9340);function x(e,t){return function(e,t,s){var l,x,m,h,f,g;let j,p,v;let N=(0,d.j)(),w=null!==(x=null!==(l=null==s?void 0:s.locale)&&void 0!==l?l:N.locale)&&void 0!==x?x:o._,C=a(e,t);if(isNaN(C))throw RangeError("Invalid time value");let b=Object.assign({},s,{addSuffix:null==s?void 0:s.addSuffix,comparison:C});C>0?(j=(0,n.Q)(t),p=(0,n.Q)(e)):(j=(0,n.Q)(e),p=(0,n.Q)(t));let y=(m=p,h=j,(g=null==void 0?void 0:(void 0).roundingMethod,e=>{let t=(g?Math[g]:Math.trunc)(e);return 0===t?0:t})((+(0,n.Q)(m)-+(0,n.Q)(h))/1e3)),D=Math.round((y-((0,u.D)(p)-(0,u.D)(j))/1e3)/60);if(D<2){if(null==s?void 0:s.includeSeconds){if(y<5)return w.formatDistance("lessThanXSeconds",5,b);if(y<10)return w.formatDistance("lessThanXSeconds",10,b);if(y<20)return w.formatDistance("lessThanXSeconds",20,b);if(y<40)return w.formatDistance("halfAMinute",0,b);else if(y<60)return w.formatDistance("lessThanXMinutes",1,b);else return w.formatDistance("xMinutes",1,b)}return 0===D?w.formatDistance("lessThanXMinutes",1,b):w.formatDistance("xMinutes",D,b)}if(D<45)return w.formatDistance("xMinutes",D,b);if(D<90)return w.formatDistance("aboutXHours",1,b);if(D<r.H_)return w.formatDistance("aboutXHours",Math.round(D/60),b);if(D<2520)return w.formatDistance("xDays",1,b);if(D<r.fH){let e=Math.round(D/r.H_);return w.formatDistance("xDays",e,b)}if(D<2*r.fH)return v=Math.round(D/r.fH),w.formatDistance("aboutXMonths",v,b);if((v=function(e,t){let s;let l=(0,n.Q)(e),r=(0,n.Q)(t),o=a(l,r),d=Math.abs((0,i.T)(l,r));if(d<1)s=0;else{1===l.getMonth()&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-o*d);let t=a(l,r)===-o;(function(e){let t=(0,n.Q)(e);return+function(e){let t=(0,n.Q)(e);return t.setHours(23,59,59,999),t}(t)==+(0,c.V)(t)})((0,n.Q)(e))&&1===d&&1===a(e,r)&&(t=!1),s=o*(d-Number(t))}return 0===s?0:s}(p,j))<12){let e=Math.round(D/r.fH);return w.formatDistance("xMonths",e,b)}{let e=v%12,t=Math.trunc(v/12);return e<3?w.formatDistance("aboutXYears",t,b):e<9?w.formatDistance("overXYears",t,b):w.formatDistance("almostXYears",t+1,b)}}(e,(0,l.L)(e,Date.now()),t)}}},function(e){e.O(0,[6840,329,8310,3954,9851,7629,7093,6148,847,1942,7648,7823,8068,5799,4567,605,85,4957,7398,3825,1785,3397,1594,9141,1713,6152,3145,428,6373,3832,1002,5978,2971,2117,1744],function(){return e(e.s=16677)}),_N_E=e.O()}]);
//# sourceMappingURL=page-0f25ee5d9498cbc5.js.map